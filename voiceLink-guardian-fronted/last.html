<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å£°è”å®ˆæŠ¤ - AIoTå®ˆæŠ¤è€…è®­ç»ƒè¥</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        :root {
            --primary-color: #3498db;
            --secondary-color: #2c3e50;
            --accent-color: #e74c3c;
            --success-color: #2ecc71;
            --warning-color: #f39c12;
            --light-color: #ecf0f1;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: #333;
            line-height: 1.6;
            min-height: 100vh;
            padding: 20px;
        }
        
        .game-container {
            max-width: 1200px;
            margin: 0 auto;
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
            overflow: hidden;
        }
        
        /* å¤´éƒ¨æ ·å¼ */
        .game-header {
            background: linear-gradient(135deg, var(--secondary-color), var(--primary-color));
            color: white;
            padding: 30px;
            text-align: center;
            position: relative;
        }
        
        .mission-badge {
            position: absolute;
            top: 20px;
            right: 30px;
            background: var(--accent-color);
            padding: 10px 20px;
            border-radius: 25px;
            font-weight: bold;
            font-size: 14px;
        }
        
        .team-info {
            display: flex;
            justify-content: center;
            gap: 30px;
            margin-top: 20px;
            flex-wrap: wrap;
        }
        
        .info-item {
            background: rgba(255, 255, 255, 0.2);
            padding: 10px 20px;
            border-radius: 10px;
        }
        
        /* è¿›åº¦æ¡æ ·å¼ */
        .progress-container {
            background: var(--light-color);
            padding: 20px;
        }
        
        .progress-bar {
            background: #bdc3c7;
            height: 12px;
            border-radius: 6px;
            overflow: hidden;
        }
        
        .progress-fill {
            background: linear-gradient(90deg, var(--success-color), #27ae60);
            height: 100%;
            width: 0%;
            transition: width 0.5s ease;
        }
        
        .levels {
            display: flex;
            justify-content: space-between;
            margin-top: 10px;
        }
        
        .level {
            text-align: center;
            font-size: 12px;
            color: #7f8c8d;
        }
        
        .level.active {
            color: var(--secondary-color);
            font-weight: bold;
        }
        
        /* å†…å®¹åŒºåŸŸæ ·å¼ */
        .game-content {
            padding: 30px;
            min-height: 500px;
        }
        
        .level-content {
            display: none;
        }
        
        .level-content.active {
            display: block;
            animation: fadeIn 0.5s ease;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .mission-card {
            background: white;
            border-radius: 15px;
            padding: 25px;
            margin-bottom: 25px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            border-left: 5px solid var(--primary-color);
        }
        
        .mission-objective {
            background: #e8f4fc;
            padding: 15px;
            border-radius: 10px;
            margin: 15px 0;
        }
        
        .checklist {
            margin: 20px 0;
        }
        
        .check-item {
            display: flex;
            align-items: center;
            margin: 10px 0;
            padding: 10px;
            background: #f8f9fa;
            border-radius: 8px;
        }
        
        .check-item input {
            margin-right: 10px;
        }
        
        .code-block {
            background: var(--secondary-color);
            color: var(--light-color);
            padding: 15px;
            border-radius: 8px;
            margin: 15px 0;
            font-family: 'Courier New', monospace;
            overflow-x: auto;
        }
        
        /* æŒ‰é’®æ ·å¼ */
        .game-controls {
            display: flex;
            justify-content: space-between;
            padding: 20px 30px;
            background: var(--light-color);
            border-top: 1px solid #bdc3c7;
        }
        
        .btn {
            padding: 12px 25px;
            border: none;
            border-radius: 25px;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .btn-prev {
            background: #95a5a6;
            color: white;
        }
        
        .btn-next {
            background: var(--primary-color);
            color: white;
        }
        
        .btn-complete {
            background: var(--success-color);
            color: white;
        }
        
        .btn:disabled {
            background: #bdc3c7;
            cursor: not-allowed;
        }
        
        .btn:hover:not(:disabled) {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        }
        
        /* å‹‹ç« æ ·å¼ */
        .badges-container {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin: 20px 0;
            flex-wrap: wrap;
        }
        
        .badge {
            width: 80px;
            height: 80px;
            background: #bdc3c7;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 12px;
            text-align: center;
            position: relative;
            transition: all 0.3s ease;
        }
        
        .badge.unlocked {
            background: linear-gradient(135deg, var(--warning-color), #e67e22);
            transform: scale(1.1);
            box-shadow: 0 5px 15px rgba(243, 156, 18, 0.4);
        }
        
        .badge-icon {
            font-size: 30px;
            margin-bottom: 5px;
        }
        
        /* å®Œæˆé¡µé¢æ ·å¼ */
        .completion-screen {
            text-align: center;
            padding: 40px;
        }
        
        .final-badge {
            width: 150px;
            height: 150px;
            background: linear-gradient(135deg, var(--accent-color), #c0392b);
            border-radius: 50%;
            margin: 0 auto 30px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 16px;
            text-align: center;
            box-shadow: 0 10px 30px rgba(231, 76, 60, 0.4);
        }
        
        .achievement-stats {
            display: flex;
            justify-content: center;
            gap: 30px;
            margin: 30px 0;
        }
        
        .stat {
            text-align: center;
        }
        
        .stat-value {
            font-size: 24px;
            font-weight: bold;
            color: var(--secondary-color);
        }
        
        .stat-label {
            font-size: 14px;
            color: #7f8c8d;
        }
        
        /* è¡¨å•å…ƒç´ æ ·å¼ */
        .input-field {
            padding: 8px 12px;
            border: 1px solid #ddd;
            border-radius: 4px;
            margin: 0 5px;
        }
        
        .scene-item {
            display: flex;
            align-items: center;
            margin: 10px 0;
            padding: 10px;
            background: #f8f9fa;
            border-radius: 8px;
        }
        
        .scene-label {
            margin-right: 10px;
            font-weight: bold;
            min-width: 120px;
        }
        
        .system-response {
            margin: 10px 0;
            padding: 10px;
            background: #f8f9fa;
            border-radius: 8px;
        }
        
        .db-status {
            text-align: center;
            padding: 10px;
            margin: 10px 0;
            border-radius: 5px;
            font-size: 14px;
        }
        
        .db-status.success {
            background-color: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }
        
        .db-status.error {
            background-color: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }
        
        /* è¡¨æ ¼æ ·å¼ */
        .design-table {
            width: 100%;
            border-collapse: collapse;
            margin: 15px 0;
        }
        
        .design-table th, .design-table td {
            border: 1px solid #ddd;
            padding: 10px;
            text-align: left;
        }
        
        .design-table th {
            background-color: var(--secondary-color);
            color: white;
        }
        
        .design-table tr:nth-child(even) {
            background-color: #f8f9fa;
        }
        
        /* é€‰æ‹©é¢˜æ ·å¼ */
        .question-container {
            margin: 15px 0;
            padding: 15px;
            background: #f8f9fa;
            border-radius: 10px;
            border-left: 4px solid var(--primary-color);
        }
        
        .question-text {
            font-weight: bold;
            margin-bottom: 10px;
            font-size: 16px;
        }
        
        .options-container {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }
        
        .option {
            display: flex;
            align-items: center;
            padding: 10px;
            background: white;
            border-radius: 8px;
            border: 1px solid #ddd;
            transition: all 0.2s ease;
            cursor: pointer;
        }
        
        .option:hover {
            background: #e9ecef;
            border-color: var(--primary-color);
        }
        
        .option.selected {
            background: #e8f4fc;
            border-color: var(--primary-color);
        }
        
        .option input {
            margin-right: 10px;
        }
        
        /* ä»»åŠ¡å¡ç‰‡æ ·å¼ */
        .task-card {
            background: white;
            border-radius: 10px;
            padding: 20px;
            margin: 15px 0;
            box-shadow: 0 3px 10px rgba(0, 0, 0, 0.08);
            border-left: 4px solid var(--primary-color);
        }
        
        .task-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }
        
        .task-title {
            font-weight: bold;
            color: var(--secondary-color);
        }
        
        .task-status {
            font-size: 0.9rem;
        }
        
        /* å“åº”å¼è°ƒæ•´ */
        @media (max-width: 768px) {
            .team-info {
                flex-direction: column;
                gap: 10px;
            }
            
            .scene-item {
                flex-direction: column;
                align-items: flex-start;
            }
            
            .scene-label {
                margin-bottom: 5px;
            }
            
            .levels {
                font-size: 10px;
            }
            
            .task-progress {
                flex-direction: column;
                gap: 0.5rem;
            }
        }

        /* å›¾ç‰‡æ ·å¼ */
        .guide-image {
            max-width: 100%;
            border-radius: 8px;
            margin: 15px 0;
            box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1);
            border: 1px solid #ddd;
        }

        .step-section {
            margin-bottom: 30px;
        }

        .step-title {
            font-size: 18px;
            font-weight: bold;
            color: var(--secondary-color);
            margin-bottom: 10px;
            padding-bottom: 5px;
            border-bottom: 2px solid var(--primary-color);
        }

        .task-step {
            margin-bottom: 15px;
        }
        
        /* è¯„ä»·è¡¨å•æ ·å¼ */
        .evaluation-form {
            background: white;
            border-radius: 15px;
            padding: 25px;
            margin-bottom: 25px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            border-left: 5px solid var(--accent-color);
        }
        
        .rating-container {
            display: flex;
            justify-content: space-between;
            margin: 20px 0;
        }
        
        .rating-item {
            text-align: center;
            flex: 1;
            padding: 10px;
        }
        
        .rating-label {
            font-weight: bold;
            margin-bottom: 10px;
            color: var(--secondary-color);
        }
        
        .rating-stars {
            display: flex;
            justify-content: center;
            gap: 5px;
        }
        
        .star {
            font-size: 24px;
            color: #ddd;
            cursor: pointer;
            transition: color 0.2s ease;
        }
        
        .star.active {
            color: var(--warning-color);
        }
        
        .feedback-section {
            margin-top: 30px;
        }
        
        .feedback-title {
            font-size: 18px;
            font-weight: bold;
            color: var(--secondary-color);
            margin-bottom: 15px;
        }
        
        .feedback-item {
            margin-bottom: 20px;
        }
        
        .feedback-label {
            font-weight: bold;
            margin-bottom: 8px;
            display: block;
        }
        
        .feedback-input {
            width: 100%;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 5px;
            font-family: inherit;
        }
        
        .feedback-input:focus {
            border-color: var(--primary-color);
            outline: none;
            box-shadow: 0 0 0 2px rgba(52, 152, 219, 0.2);
        }
        
        .evaluation-badge {
            width: 100px;
            height: 100px;
            background: linear-gradient(135deg, var(--success-color), #27ae60);
            border-radius: 50%;
            margin: 0 auto 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 14px;
            text-align: center;
            box-shadow: 0 5px 15px rgba(46, 204, 113, 0.4);
        }
        
        /* ç©ºå·¢è€äººå®‰å…¨ç®¡ç†ç³»ç»Ÿæ ·å¼ */
        .elderly-safety-system {
            margin-top: 20px;
            border: 2px solid var(--primary-color);
            border-radius: 15px;
            overflow: hidden;
        }
        
        .elderly-safety-header {
            background: linear-gradient(135deg, var(--secondary-color), var(--primary-color));
            color: white;
            padding: 15px;
            text-align: center;
        }
        
        .elderly-safety-header h3 {
            margin: 0;
            font-size: 1.5rem;
        }
        
        .elderly-safety-header p {
            margin: 5px 0 0;
            opacity: 0.9;
        }
        
        .safety-system-container {
            width: 100%;
            background: white;
            border-radius: 0 0 15px 15px;
            overflow: hidden;
            min-height: 600px;
            position: relative;
        }
        
        /* æˆ¿å±‹å¤–éƒ¨è§†å›¾ */
        .house-exterior {
            padding: 25px;
            text-align: center;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 100%;
            background: linear-gradient(to bottom, #87CEEB, #E0F7FA);
            min-height: 550px;
        }
        
        .house-image {
            width: 450px;
            height: 350px;
            position: relative;
            margin-bottom: 25px;
            cursor: pointer;
            transition: transform 0.3s;
            border-radius: 20px;
            overflow: hidden;
            box-shadow: 0 15px 30px rgba(0,0,0,0.25);
            border: 3px solid #2c3e50;
        }
        
        .house-image img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            border-radius: 20px;
        }
        
        .house-image:hover {
            transform: scale(1.02);
        }
        
        .door-overlay {
            position: absolute;
            bottom: 0px;
            left: 128px;
            width: 45px;
            height: 37.5px;
            background: rgba(139, 69, 19, 0.5);
            border-radius: 3px 3px 0 0;
            cursor: pointer;
            transition: all 0.3s;
            border: 2px solid rgba(139, 69, 19, 0.8);
            display: flex;
            align-items: center;
            justify-content: center;
            color: #FFD700;
            font-size: 0.8rem;
            font-weight: bold;
        }
        
        .door-overlay:hover {
            background: rgba(160, 82, 45, 0.7);
            color: #FFF;
        }
        
        .instruction {
            margin-top: 15px;
            font-size: 1rem;
            color: #2c3e50;
            background: rgba(255,255,255,0.7);
            padding: 8px 15px;
            border-radius: 10px;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
        }
        
        /* æˆ¿å±‹å†…éƒ¨ä¿¯è§†å›¾ */
        .house-interior {
            display: none;
            height: 100%;
            padding: 20px;
            background: #f5f5f5;
            min-height: 550px;
        }
        
        .floor-plan {
            display: grid;
            grid-template-columns: 1fr 1fr;
            grid-template-rows: 1fr 1fr;
            gap: 20px;
            height: 400px;
            margin-bottom: 20px;
        }
        
        .room {
            background: white;
            border-radius: 15px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            padding: 15px;
            text-align: center;
            border: 3px solid transparent;
            position: relative;
            overflow: hidden;
        }
        
        .room:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(0,0,0,0.15);
            border-color: #3498db;
        }
        
        .room i {
            font-size: 2.5rem;
            margin-bottom: 10px;
            color: #3498db;
            position: relative;
            z-index: 1;
        }
        
        .room-name {
            font-size: 1.3rem;
            font-weight: bold;
            color: #2c3e50;
            position: relative;
            z-index: 1;
        }
        
        .back-button {
            position: absolute;
            top: 15px;
            left: 15px;
            background: #3498db;
            color: white;
            border: none;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            font-size: 1.2rem;
            cursor: pointer;
            box-shadow: 0 4px 8px rgba(0,0,0,0.2);
            transition: all 0.3s;
            z-index: 10;
        }
        
        .back-button:hover {
            background: #2980b9;
            transform: scale(1.1);
        }
        
        /* æˆ¿é—´è¯¦æƒ…è§†å›¾ */
        .room-detail {
            display: none;
            height: 100%;
            padding: 15px;
            background: #f5f5f5;
            position: relative;
            padding-bottom: 180px;
        }
        
        .room-header {
            text-align: center;
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 3px dashed #3498db;
        }
        
        .room-header h2 {
            color: #2c3e50;
            font-size: 1.7rem;
        }
        
        .room-header p {
            color: #7f8c8d;
            font-size: 1.1rem;
            margin-top: 8px;
        }
        
        .room-content {
            display: flex;
            height: calc(100% - 220px);
            gap: 15px;
            min-height: 350px;
        }
        
        /* ä¾§è¾¹é¢æ¿æ ·å¼ */
        .side-panel {
            flex: 1;
            display: flex;
            flex-direction: column;
            padding: 15px;
            background: white;
            border-radius: 15px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            overflow-y: auto;
            max-height: 100%;
        }
        
        /* æˆ¿é—´å›¾ç‰‡å®¹å™¨ */
        .room-image-container {
            flex: 2;
            display: flex;
            justify-content: center;
            align-items: center;
            position: relative;
            background: #f8f9fa;
            border-radius: 15px;
            border: 4px solid #3498db;
            padding: 12px;
            min-height: 350px;
            box-shadow: 0 8px 25px rgba(0,0,0,0.15);
        }
        
        .room-image {
            width: 100%;
            height: 100%;
            object-fit: contain;
            border-radius: 12px;
            max-height: 100%;
        }
        
        /* äº¤äº’åŒºåŸŸæ ·å¼ */
        .interaction-area {
            position: absolute;
            bottom: 25px;
            left: 50%;
            transform: translateX(-50%);
            width: 96%;
            background: linear-gradient(135deg, #e8f4f8, #d4e7f7);
            border-radius: 18px;
            border: 4px solid #2980b9;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            color: #2c3e50;
            font-size: 1.1rem;
            padding: 20px;
            text-align: center;
            height: 160px;
            box-shadow: 0 8px 25px rgba(0,0,0,0.25);
            z-index: 30;
        }
        
        .interaction-area h3 {
            font-size: 1.4rem;
            font-weight: bold;
            margin-bottom: 8px;
            color: #2c3e50;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.1);
        }
        
        .interaction-area p {
            font-size: 1rem;
            margin-bottom: 12px;
            color: #34495e;
            font-weight: 500;
        }
        
        .interaction-buttons {
            display: flex;
            gap: 15px;
            margin-top: 10px;
        }
        
        .interaction-button {
            background: linear-gradient(135deg, #3498db, #2980b9);
            color: white;
            border: none;
            border-radius: 25px;
            padding: 10px 20px;
            font-size: 0.95rem;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            gap: 8px;
            font-weight: bold;
            box-shadow: 0 4px 15px rgba(52, 152, 219, 0.3);
            border: 2px solid rgba(255,255,255,0.2);
        }
        
        .interaction-button:hover {
            background: linear-gradient(135deg, #2980b9, #2471a3);
            transform: translateY(-3px);
            box-shadow: 0 6px 20px rgba(52, 152, 219, 0.4);
        }
        
        .interaction-button:active {
            transform: translateY(-1px);
        }
        
        .interaction-button i {
            font-size: 1.1rem;
        }
        
        /* å±é™©æ ‡è®°æ ·å¼ */
        .danger-arrow {
            position: absolute;
            width: 80px;
            height: 80px;
            z-index: 20;
            display: none;
            animation: pulse 1.5s infinite;
        }
        
        .danger-arrow::before {
            content: 'â¤';
            font-size: 60px;
            color: #ff0000;
            text-shadow: 2px 2px 6px rgba(0,0,0,0.6);
            display: block;
            transform: rotate(-45deg);
        }
        
        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.1); }
            100% { transform: scale(1); }
        }
        
        .danger-explanation {
            background: rgba(255, 255, 255, 0.95);
            border: 2px solid #ff0000;
            border-radius: 12px;
            padding: 15px;
            margin-bottom: 15px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }
        
        .danger-explanation h3 {
            color: #ff0000;
            margin-bottom: 8px;
            font-size: 1.2rem;
        }
        
        .danger-explanation p {
            color: #333;
            line-height: 1.5;
            font-size: 0.9rem;
        }
        
        .danger-explanation ul {
            margin-top: 8px;
            padding-left: 18px;
        }
        
        .danger-explanation li {
            color: #333;
            margin-bottom: 4px;
            line-height: 1.4;
        }

        .question-box {
            background: #e3f2fd;
            border: 2px solid #2196f3;
            border-radius: 8px;
            padding: 12px;
            margin-top: 12px;
            text-align: center;
        }

        .question-box p {
            color: #1565c0;
            font-weight: bold;
            font-size: 1rem;
            margin: 0;
        }
        
        /* ä¼ æ„Ÿå™¨é€‰æ‹©åŒºåŸŸ */
        .sensor-options {
            display: flex;
            flex-direction: column;
            gap: 12px;
            margin-top: 12px;
            width: 100%;
        }
        
        .sensor-option {
            width: 100%;
            height: 70px;
            background: white;
            border-radius: 12px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            cursor: grab;
            transition: all 0.3s;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            padding: 8px;
            text-align: center;
            border: 2px solid transparent;
        }
        
        .sensor-option:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(0,0,0,0.15);
            border-color: #3498db;
        }
        
        .sensor-option i {
            font-size: 1.7rem;
            margin-bottom: 4px;
            color: #3498db;
        }
        
        .sensor-name {
            font-size: 0.8rem;
            font-weight: bold;
            color: #2c3e50;
        }
        
        .sensor-drop-zone {
            position: absolute;
            width: 120px;
            height: 120px;
            border: 4px dashed #2ecc71;
            border-radius: 12px;
            display: none;
            align-items: center;
            justify-content: center;
            background: rgba(46, 204, 113, 0.15);
            z-index: 25;
            font-size: 0.9rem;
            text-align: center;
            padding: 5px;
        }
        
        .success-message {
            display: none;
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: rgba(46, 204, 113, 0.9);
            color: white;
            padding: 15px 30px;
            border-radius: 12px;
            font-size: 1.3rem;
            font-weight: bold;
            box-shadow: 0 10px 25px rgba(0,0,0,0.2);
            z-index: 100;
            text-align: center;
            animation: pop 0.5s;
        }
        
        @keyframes pop {
            0% { transform: translate(-50%, -50%) scale(0.5); opacity: 0; }
            100% { transform: translate(-50%, -50%) scale(1); opacity: 1; }
        }

        /* å“åº”å¼è°ƒæ•´ */
        @media (max-width: 768px) {
            .room-content {
                flex-direction: column;
                height: auto;
                min-height: 500px;
            }
            
            .room-image-container {
                min-height: 300px;
                order: -1;
                margin-bottom: 15px;
            }
            
            .side-panel {
                max-height: 200px;
            }
            
            .interaction-area {
                position: relative;
                bottom: auto;
                left: auto;
                transform: none;
                width: 100%;
                margin-top: 20px;
                height: 150px;
                padding: 15px;
            }
            
            .interaction-buttons {
                flex-direction: column;
                gap: 10px;
                width: 100%;
            }
            
            .interaction-button {
                width: 100%;
                justify-content: center;
            }
            
            .house-image {
                width: 100%;
                max-width: 400px;
                height: 280px;
            }
        }

        /* ä»»åŠ¡é”å®šçŠ¶æ€ */
        .task-locked {
            opacity: 0.6;
            pointer-events: none;
        }
        
        .task-locked-overlay {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0,0,0,0.1);
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #7f8c8d;
            font-weight: bold;
            font-size: 1.2rem;
        }
        
        .task-unlock-message {
            background-color: #d4edda;
            color: #155724;
            padding: 10px 15px;
            border-radius: 8px;
            margin-top: 10px;
            display: none;
        }

        /* ä»»åŠ¡å¯¼èˆªæ ·å¼ */
        .task-navigation {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin: 20px 0;
        }
        
        .task-nav-btn {
            padding: 10px 20px;
            background: var(--primary-color);
            color: white;
            border: none;
            border-radius: 25px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .task-nav-btn:hover {
            background: #2980b9;
            transform: translateY(-2px);
        }
        
        .task-nav-btn.active {
            background: var(--secondary-color);
        }
        
        .task-content {
            display: none;
        }
        
        .task-content.active {
            display: block;
            animation: fadeIn 0.5s ease;
        }
        
        /* ä»»åŠ¡çŠ¶æ€æ ‡ç­¾æ ·å¼ */
        .task-status-badge {
            padding: 4px 8px;
            border-radius: 12px;
            font-size: 0.8rem;
            font-weight: bold;
        }
        
        .status-inprogress {
            background-color: #fff3cd;
            color: #856404;
        }
        
        .status-completed {
            background-color: #d1ecf1;
            color: #0c5460;
        }
        
        /* è¿‡å…³ç¡®è®¤æ ·å¼ */
        .level-completion {
            background: linear-gradient(135deg, #2ecc71, #27ae60);
            color: white;
            padding: 20px;
            border-radius: 15px;
            margin: 20px 0;
            text-align: center;
            box-shadow: 0 8px 25px rgba(46, 204, 113, 0.4);
            display: none;
        }
        
        .level-completion.show {
            display: block;
            animation: bounceIn 0.6s ease;
        }
        
        @keyframes bounceIn {
            0% { transform: scale(0.8); opacity: 0; }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); opacity: 1; }
        }
        
        .completion-icon {
            font-size: 48px;
            margin-bottom: 15px;
        }
        
        .completion-title {
            font-size: 24px;
            font-weight: bold;
            margin-bottom: 10px;
        }
        
        .completion-message {
            font-size: 16px;
            margin-bottom: 15px;
        }
        
        .completion-badge-preview {
            width: 80px;
            height: 80px;
            background: linear-gradient(135deg, #f39c12, #e67e22);
            border-radius: 50%;
            margin: 0 auto 15px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 12px;
            text-align: center;
            box-shadow: 0 5px 15px rgba(243, 156, 18, 0.4);
        }
        
        /* çªå‡ºæ˜¾ç¤ºé‡è¦å®Œæˆé¡¹ */
        .highlight-completion {
            font-size: 18px !important;
            font-weight: bold !important;
            background: linear-gradient(135deg, #2ecc71, #27ae60) !important;
            color: white !important;
            padding: 15px 20px !important;
            border-radius: 10px !important;
            box-shadow: 0 5px 15px rgba(46, 204, 113, 0.4) !important;
            border: 2px solid #27ae60 !important;
            margin: 15px 0 !important;
            display: flex !important;
            align-items: center !important;
            transition: all 0.3s ease !important;
        }
        
        .highlight-completion:hover {
            transform: translateY(-3px) !important;
            box-shadow: 0 8px 20px rgba(46, 204, 113, 0.6) !important;
        }
        
        .highlight-completion input {
            transform: scale(1.3) !important;
            margin-right: 15px !important;
        }
        
        .highlight-completion label {
            font-size: 18px !important;
            font-weight: bold !important;
            color: white !important;
            text-shadow: 1px 1px 3px rgba(0,0,0,0.3) !important;
        }
        
        /* ä¸åŒé¢œè‰²çš„çªå‡ºæ˜¾ç¤º */
        .highlight-warning {
            background: linear-gradient(135deg, #f39c12, #e67e22) !important;
            border: 2px solid #e67e22 !important;
            box-shadow: 0 5px 15px rgba(243, 156, 18, 0.4) !important;
        }
        
        .highlight-warning:hover {
            box-shadow: 0 8px 20px rgba(243, 156, 18, 0.6) !important;
        }
        
        .highlight-info {
            background: linear-gradient(135deg, #3498db, #2980b9) !important;
            border: 2px solid #2980b9 !important;
            box-shadow: 0 5px 15px rgba(52, 152, 219, 0.4) !important;
        }
        
        .highlight-info:hover {
            box-shadow: 0 8px 20px rgba(52, 152, 219, 0.6) !important;
        }
        
        .highlight-purple {
            background: linear-gradient(135deg, #9b59b6, #8e44ad) !important;
            border: 2px solid #8e44ad !important;
            box-shadow: 0 5px 15px rgba(155, 89, 182, 0.4) !important;
        }
        
        .highlight-purple:hover {
            box-shadow: 0 8px 20px rgba(155, 89, 182, 0.6) !important;
        }

        /* ç¬¬ä¸‰å…³ä»»åŠ¡å®Œæˆé¡¹çªå‡ºæ ·å¼ */
        .highlight-task-completion {
            font-size: 20px !important;
            font-weight: bold !important;
            background: linear-gradient(135deg, #2ecc71, #27ae60) !important;
            color: white !important;
            padding: 18px 22px !important;
            border-radius: 12px !important;
            box-shadow: 0 6px 18px rgba(46, 204, 113, 0.5) !important;
            border: 3px solid #27ae60 !important;
            margin: 20px 0 !important;
            display: flex !important;
            align-items: center !important;
            transition: all 0.3s ease !important;
        }
        
        .highlight-task-completion:hover {
            transform: translateY(-4px) !important;
            box-shadow: 0 10px 25px rgba(46, 204, 113, 0.7) !important;
        }
        
        .highlight-task-completion input {
            transform: scale(1.5) !important;
            margin-right: 18px !important;
        }
        
        .highlight-task-completion label {
            font-size: 20px !important;
            font-weight: bold !important;
            color: white !important;
            text-shadow: 1px 1px 4px rgba(0,0,0,0.4) !important;
        }
        
        /* ä¸ºä»»åŠ¡äºŒå®Œæˆé¡¹ä½¿ç”¨ä¸åŒé¢œè‰²ï¼Œä»¥åŒºåˆ† */
        .highlight-task-completion.task2 {
            background: linear-gradient(135deg, #3498db, #2980b9) !important;
            border: 3px solid #2980b9 !important;
            box-shadow: 0 6px 18px rgba(52, 152, 219, 0.5) !important;
        }
        
        .highlight-task-completion.task2:hover {
            box-shadow: 0 10px 25px rgba(52, 152, 219, 0.7) !important;
        }
    </style>
</head>
<body>
    <div class="game-container">
        <!-- å¤´éƒ¨ -->
        <div class="game-header">
            <div class="mission-badge">Sçº§ä»»åŠ¡</div>
            <h1>å£°è”å®ˆæŠ¤Â·ç»ˆææŒ‘æˆ˜</h1>
            <p>ç©ºå·¢è€äººç´§æ€¥å‘¼æ•‘ä¸å®‰å…¨ç›‘æ§ç³»ç»Ÿ</p>
            
            <div class="team-info">
                <div class="info-item">
                    <strong>å°ç»„:</strong> 
                    <select class="input-field" id="group-select">
                        <option value="">-- è¯·é€‰æ‹©å°ç»„ --</option>
                        <option value="ç¬¬ä¸€ç»„">ç¬¬ä¸€ç»„</option>
                        <option value="ç¬¬äºŒç»„">ç¬¬äºŒç»„</option>
                        <option value="ç¬¬ä¸‰ç»„">ç¬¬ä¸‰ç»„</option>
                        <option value="ç¬¬å››ç»„">ç¬¬å››ç»„</option>
                        <option value="ç¬¬äº”ç»„">ç¬¬äº”ç»„</option>
                        <option value="ç¬¬å…­ç»„">ç¬¬å…­ç»„</option>
                        <option value="ç¬¬ä¸ƒç»„">ç¬¬ä¸ƒç»„</option>
                        <option value="ç¬¬å…«ç»„">ç¬¬å…«ç»„</option>
                        <option value="ç¬¬ä¹ç»„">ç¬¬ä¹ç»„</option>
                        <option value="ç¬¬åç»„">ç¬¬åç»„</option>
                        <option value="ç¬¬åä¸€ç»„">ç¬¬åä¸€ç»„</option>
                        <option value="ç¬¬åäºŒç»„">ç¬¬åäºŒç»„</option>
                        <option value="ç¬¬åä¸‰ç»„">ç¬¬åä¸‰ç»„</option>
                        <option value="ç¬¬åå››ç»„">ç¬¬åå››ç»„</option>
                        <option value="ç¬¬åäº”ç»„">ç¬¬åäº”ç»„</option>
                        <option value="ç¬¬åå…­ç»„">ç¬¬åå…­ç»„</option>
                        <option value="ç¬¬åä¸ƒç»„">ç¬¬åä¸ƒç»„</option>
                        <option value="ç¬¬åå…«ç»„">ç¬¬åå…«ç»„</option>
                    </select>
                </div>
                <div class="info-item">
                    <strong>æŒ‡æŒ¥å®˜:</strong> <span>åˆ˜ç‡šå¨œè€å¸ˆ</span>
                </div>
            </div>
        </div>

        <!-- æ•°æ®åº“çŠ¶æ€æç¤º -->
        <div id="db-status" class="db-status" style="display: none;"></div>

        <!-- è¿›åº¦æ¡ -->
        <div class="progress-container">
            <div class="progress-bar">
                <div class="progress-fill" id="progress-fill"></div>
            </div>
            <div class="levels">
                <div class="level active" data-level="1">æƒ…å¢ƒä¸é—®é¢˜</div>
                <div class="level" data-level="2">æ–¹æ¡ˆè®¾è®¡</div>
                <div class="level" data-level="3">åŠ¨æ‰‹æ­å»º</div>
                <div class="level" data-level="4">æˆæœå±•ç¤º</div>
                <div class="level" data-level="5">æ€»ç»“æ‹“å±•</div>
                <div class="level" data-level="6">æ•™å­¦è¯„ä»·</div>
            </div>
        </div>

        <!-- å†…å®¹åŒºåŸŸ -->
        <div class="game-content">
            <!-- å…³å¡1: æƒ…å¢ƒä¸é—®é¢˜ -->
            <div class="level-content active" id="level-1">
                <div class="mission-card">
                    <h2>ç¬¬ä¸€å…³ï¼šæƒ…å¢ƒä¸é—®é¢˜â€”â€”ä¸ºä½•éœ€è¦"å£°è”å®ˆæŠ¤"</h2>
                    <p><strong>ä»»åŠ¡ç›®æ ‡:</strong> ç†è§£é¡¹ç›®çš„æ„ä¹‰ä¸ä»·å€¼ï¼Œæ˜ç¡®æŠ€æœ¯é€‰å‹çš„ç†ç”±ã€‚</p>
                    
                    <div class="mission-objective">
                        <h3>è¡ŒåŠ¨æŒ‡å—:</h3>
                        <p>1. è§‚çœ‹æƒ…å¢ƒè§†é¢‘ï¼Œæ€è€ƒï¼šè§†é¢‘ä¸­è€äººé¢ä¸´çš„æœ€å¤§å›°å¢ƒæ˜¯ä»€ä¹ˆï¼Ÿ</p>
                        <p>2. ä¸å°é˜Ÿæˆå‘˜äº¤æµä½ çš„çœ‹æ³•ã€‚</p>
                    </div>
                    
                    <div class="question-container">
                        <div class="question-text">æ€è€ƒä¸è®¨è®ºï¼šè§†é¢‘ä¸­è€äººé¢ä¸´çš„æœ€å¤§å›°å¢ƒæ˜¯ä»€ä¹ˆï¼Ÿ</div>
                        <div class="options-container">
                            <div class="option" id="option-a">
                                <input type="radio" id="choice-a" name="question1" value="A">
                                <label for="choice-a">A. æ‘”å€’æœ¬èº«</label>
                            </div>
                            <div class="option" id="option-b">
                                <input type="radio" id="choice-b" name="question1" value="B">
                                <label for="choice-b">B. æ‘”å€’åæ±‚æ•‘ä¿¡å·æ— æ³•æœ‰æ•ˆä¼ é€’</label>
                            </div>
                        </div>
                    </div>
                    
                    <div class="mission-objective">
                        <h3>æˆ‘ä»¬çš„ä½¿å‘½:</h3>
                        <p>æ„å»ºä¸€ä¸ªèƒ½"å¬æ‡‚"è€äººå‘¼æ•‘ï¼Œå¹¶èƒ½ç«‹å³å‘äº‘ç«¯å‘é€è­¦æŠ¥çš„æ™ºèƒ½ç³»ç»Ÿã€‚</p>
                    </div>
                </div>
                
                <!-- è¿‡å…³ç¡®è®¤ -->
                <div class="level-completion" id="level-1-completion">
                    <div class="completion-icon">ğŸ¯</div>
                    <div class="completion-title">ç¬¬ä¸€å…³å®Œæˆï¼</div>
                    <div class="completion-message">æ‚¨å·²æˆåŠŸç†è§£é¡¹ç›®æ„ä¹‰ï¼Œå¯ä»¥è¿›å…¥ä¸‹ä¸€å…³</div>
                    <div class="completion-badge-preview">
                        <div>
                            <div class="badge-icon">ğŸ”</div>
                            <div>æ´å¯Ÿè€…</div>
                        </div>
                    </div>
                    <p>å·²è§£é”å‹‹ç« ï¼šæ´å¯Ÿè€…</p>
                </div>
                
                <div class="badges-container">
                    <div class="badge" id="badge-1">
                        <div>
                            <div class="badge-icon">ğŸ”</div>
                            <div>æ´å¯Ÿè€…</div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- å…³å¡2: æ–¹æ¡ˆè®¾è®¡ -->
            <div class="level-content" id="level-2">
                <div class="mission-card">
                    <h2>ç¬¬äºŒå…³ï¼šæ–¹æ¡ˆè®¾è®¡â€”â€”ç©ºå·¢è€äººæ™ºèƒ½å®‰å…¨ç³»ç»Ÿè®¾è®¡æ–¹æ¡ˆ</h2>
                    <p><strong>ä»»åŠ¡ç›®æ ‡:</strong> ä¸ºä½ çš„ç³»ç»Ÿé€‰å®šåœºæ™¯ã€è®¾è®¡åŠŸèƒ½ï¼Œå¹¶è§„åˆ’æŠ€æœ¯è·¯çº¿ã€‚</p>
                    
                    <div class="mission-objective">
                        <h3>è¡ŒåŠ¨æŒ‡å—:</h3>
                        <p>è¯·åŒå­¦ä»¬é€‰å®šä¸€ä¸ªç”Ÿæ´»åœºæ™¯ï¼Œæ·±å…¥åˆ†æç©ºå·¢è€äººåœ¨æ­¤å¯èƒ½é‡åˆ°çš„å›°éš¾ä¸é£é™©ï¼Œå¹¶è®¾è®¡å‡ºèƒ½é€šè¿‡è¯­éŸ³è¯†åˆ«æŠ€æœ¯æä¾›å¸®åŠ©çš„æ™ºèƒ½è§£å†³æ–¹æ¡ˆã€‚</p>
                    </div>
                    
                    <!-- ç©ºå·¢è€äººå®‰å…¨ç®¡ç†ç³»ç»Ÿ -->
                    <div class="elderly-safety-system">
                        <div class="elderly-safety-header">
                            <h3><i class="fas fa-home"></i> ç©ºå·¢è€äººå®‰å…¨ç®¡ç†ç³»ç»Ÿ</h3>
                            <p>å¸®åŠ©æ‚¨åˆ†æä¸åŒåœºæ™¯ä¸­çš„å®‰å…¨éšæ‚£ï¼Œä¸ºç³»ç»Ÿè®¾è®¡æä¾›å‚è€ƒ</p>
                        </div>
                        
                        <div class="safety-system-container">
                            <!-- æˆ¿å±‹å¤–éƒ¨è§†å›¾ -->
                            <div class="house-exterior" id="houseExterior">
                                <div class="house-image">
                                    <img src="https://img.tukuppt.com/png_preview/00/04/45/oVwPXJXJWr.jpg!/fw/780" alt="å¡é€šæˆ¿å±‹">
                                    <div class="door-overlay" id="frontDoor">
                                        è¿›å…¥
                                    </div>
                                </div>
                                <div class="instruction">
                                    ç‚¹å‡»å¤§é—¨è¿›å…¥æˆ¿å±‹å†…éƒ¨ï¼Œæ¢ç´¢å„ä¸ªæˆ¿é—´çš„å®‰å…¨éšæ‚£
                                </div>
                            </div>
                            
                            <!-- æˆ¿å±‹å†…éƒ¨ä¿¯è§†å›¾ -->
                            <div class="house-interior" id="houseInterior">
                                <button class="back-button" id="backToExterior">
                                    <i class="fas fa-arrow-left"></i>
                                </button>
                                <h2 style="text-align:center; margin-bottom:15px; color:#2c3e50;">æˆ¿å±‹å†…éƒ¨ä¿¯è§†å›¾</h2>
                                <div class="floor-plan">
                                    <div class="room" id="livingRoom">
                                        <i class="fas fa-couch"></i>
                                        <div class="room-name">å®¢å…</div>
                                    </div>
                                    <div class="room" id="kitchen">
                                        <i class="fas fa-utensils"></i>
                                        <div class="room-name">å¨æˆ¿</div>
                                    </div>
                                    <div class="room" id="bathroom">
                                        <i class="fas fa-bath"></i>
                                        <div class="room-name">å«ç”Ÿé—´</div>
                                    </div>
                                    <div class="room" id="bedroom">
                                        <i class="fas fa-bed"></i>
                                        <div class="room-name">å§å®¤</div>
                                    </div>
                                </div>
                                <div class="instruction">
                                    ç‚¹å‡»ä»»æ„æˆ¿é—´æŸ¥çœ‹è¯¥åŒºåŸŸçš„å®‰å…¨éšæ‚£åŠè§£å†³æ–¹æ¡ˆ
                                </div>
                            </div>
                            
                            <!-- å®¢å…è¯¦æƒ… -->
                            <div class="room-detail" id="livingRoomDetail">
                                <button class="back-button" id="backToInterior1">
                                    <i class="fas fa-arrow-left"></i>
                                </button>
                                <div class="room-header">
                                    <h2><i class="fas fa-couch"></i> å®¢å…å®‰å…¨åˆ†æ</h2>
                                    <p>"è€äººåœ¨å®¢å…ä¼‘æ¯ï¼Œæœ€å¯èƒ½å‘ç”Ÿä»€ä¹ˆæ„å¤–ï¼Ÿ"</p>
                                </div>
                                <div class="room-content">
                                    <!-- å·¦ä¾§é¢æ¿ -->
                                    <div class="side-panel" id="livingRoomLeftPanel">
                                        <!-- å†…å®¹å°†é€šè¿‡JavaScriptåŠ¨æ€ç”Ÿæˆ -->
                                    </div>
                                    
                                    <!-- ä¸­é—´åŒºåŸŸ - å®¢å…å›¾ç‰‡ -->
                                    <div class="room-image-container">
                                        <img src="https://p3-flow-imagex-sign.byteimg.com/ocean-cloud-tos/abf405d1ef0e4dcc8a8cf07e7370e4fepreview.png~tplv-a9rns2rl98-downsize.png?rcl=021762856001220fdbddc03001b0b280000000000000019584e9a&rk3s=8e244e95&rrcfp=10c8fdaa&x-expires=2079080008&x-signature=uLfRQ%2FLoXawrkZ4cx5%2Fyt1E%2BLlY%3D" alt="å®¢å…å®‰å…¨åˆ†æ" class="room-image">
                                        <!-- çº¢è‰²ç®­å¤´ -->
                                        <div class="danger-arrow" id="livingRoomDangerArrow1" style="top: 35%; left: 65%;"></div>
                                        <div class="danger-arrow" id="livingRoomDangerArrow2" style="top: 35%; left: 25%; display: none;"></div>
                                        <!-- ä¼ æ„Ÿå™¨æ”¾ç½®åŒºåŸŸ -->
                                        <div class="sensor-drop-zone" id="livingRoomDropZone1" style="top: 40%; left: 70%;"></div>
                                        <div class="sensor-drop-zone" id="livingRoomDropZone2" style="top: 40%; left: 20%; display: none;"></div>
                                    </div>
                                    
                                    <!-- å³ä¾§é¢æ¿ -->
                                    <div class="side-panel" id="livingRoomRightPanel">
                                        <!-- å†…å®¹å°†é€šè¿‡JavaScriptåŠ¨æ€ç”Ÿæˆ -->
                                    </div>
                                </div>
                                
                                <!-- åº•éƒ¨äº¤äº’åŒºåŸŸ -->
                                <div class="interaction-area">
                                    <h3>å®‰å…¨é˜²æŠ¤æ“ä½œåŒº</h3>
                                    <p id="livingRoomInteractionText">ç‚¹å‡»æŒ‰é’®æ ‡è®°å®¢å…ä¸­çš„å±é™©åŒºåŸŸ</p>
                                    <div class="interaction-buttons">
                                        <button class="interaction-button" id="livingRoomMarkDangerBtn">
                                            <i class="fas fa-exclamation-triangle"></i> æ ‡è®°å±é™©åŒºåŸŸ
                                        </button>
                                        <button class="interaction-button" id="livingRoomResetBtn">
                                            <i class="fas fa-redo"></i> é‡ç½®
                                        </button>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- å¨æˆ¿è¯¦æƒ… -->
                            <div class="room-detail" id="kitchenDetail">
                                <button class="back-button" id="backToInterior2">
                                    <i class="fas fa-arrow-left"></i>
                                </button>
                                <div class="room-header">
                                    <h2><i class="fas fa-utensils"></i> å¨æˆ¿å®‰å…¨åˆ†æ</h2>
                                    <p>"å¨æˆ¿é‡Œæœ‰å“ªäº›å®¹æ˜“è¢«å¿½ç•¥çš„å®‰å…¨éšæ‚£ï¼Ÿ"</p>
                                </div>
                                <div class="room-content">
                                    <!-- å·¦ä¾§é¢æ¿ -->
                                    <div class="side-panel" id="kitchenLeftPanel">
                                        <!-- å†…å®¹å°†é€šè¿‡JavaScriptåŠ¨æ€ç”Ÿæˆ -->
                                    </div>
                                    
                                    <!-- ä¸­é—´åŒºåŸŸ - å¨æˆ¿å›¾ç‰‡ -->
                                    <div class="room-image-container">
                                        <img src="https://p3-flow-imagex-sign.byteimg.com/ocean-cloud-tos/9de9fb40f47a408490d73f5a7947b732preview.png~tplv-a9rns2rl98-image.png?rcl=021762855675356fdbddc03001b0b280000000000000019c365c8&rk3s=8e244e95&rrcfp=10c8fdaa&x-expires=2079079682&x-signature=mia6SndAOKpPgQzkfyg3zCpeJws%3D" alt="å¨æˆ¿å®‰å…¨åˆ†æ" class="room-image">
                                        <!-- çº¢è‰²ç®­å¤´ -->
                                        <div class="danger-arrow" id="kitchenDangerArrow1" style="top: 35%; left: 65%;"></div>
                                        <div class="danger-arrow" id="kitchenDangerArrow2" style="top: 35%; left: 25%; display: none;"></div>
                                        <!-- ä¼ æ„Ÿå™¨æ”¾ç½®åŒºåŸŸ -->
                                        <div class="sensor-drop-zone" id="kitchenDropZone1" style="top: 40%; left: 70%;"></div>
                                        <div class="sensor-drop-zone" id="kitchenDropZone2" style="top: 40%; left: 20%; display: none;"></div>
                                    </div>
                                    
                                    <!-- å³ä¾§é¢æ¿ -->
                                    <div class="side-panel" id="kitchenRightPanel">
                                        <!-- å†…å®¹å°†é€šè¿‡JavaScriptåŠ¨æ€ç”Ÿæˆ -->
                                    </div>
                                </div>
                                
                                <!-- åº•éƒ¨äº¤äº’åŒºåŸŸ -->
                                <div class="interaction-area">
                                    <h3>å®‰å…¨é˜²æŠ¤æ“ä½œåŒº</h3>
                                    <p id="kitchenInteractionText">ç‚¹å‡»æŒ‰é’®æ ‡è®°å¨æˆ¿ä¸­çš„å±é™©åŒºåŸŸ</p>
                                    <div class="interaction-buttons">
                                        <button class="interaction-button" id="kitchenMarkDangerBtn">
                                            <i class="fas fa-exclamation-triangle"></i> æ ‡è®°å±é™©åŒºåŸŸ
                                        </button>
                                        <button class="interaction-button" id="kitchenResetBtn">
                                            <i class="fas fa-redo"></i> é‡ç½®
                                        </button>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- å«ç”Ÿé—´è¯¦æƒ… -->
                            <div class="room-detail" id="bathroomDetail">
                                <button class="back-button" id="backToInterior3">
                                    <i class="fas fa-arrow-left"></i>
                                </button>
                                <div class="room-header">
                                    <h2><i class="fas fa-bath"></i> å«ç”Ÿé—´å®‰å…¨åˆ†æ</h2>
                                    <p>"å«ç”Ÿé—´æ˜¯æ„å¤–é«˜å‘åœ°ï¼Œæˆ‘ä»¬å¯ä»¥æ€ä¹ˆé¢„é˜²ï¼Ÿ"</p>
                                </div>
                                <div class="room-content">
                                    <!-- å·¦ä¾§é¢æ¿ -->
                                    <div class="side-panel" id="bathroomLeftPanel">
                                        <!-- å†…å®¹å°†é€šè¿‡JavaScriptåŠ¨æ€ç”Ÿæˆ -->
                                    </div>
                                    
                                    <!-- ä¸­é—´åŒºåŸŸ - å«ç”Ÿé—´å›¾ç‰‡ -->
                                    <div class="room-image-container">
                                        <img src="https://p3-flow-imagex-sign.byteimg.com/ocean-cloud-tos/f02405fcc4624f728adc4b87214c6b03preview.png~tplv-a9rns2rl98-downsize.png?rcl=021762855888721fdbddc03001b0b280000000000000019bb8e69&rk3s=8e244e95&rrcfp=10c8fdaa&x-expires=2079079895&x-signature=6VhVXawz2ldXuD8e8erXLys30bI%3D" alt="å«ç”Ÿé—´å®‰å…¨åˆ†æ" class="room-image">
                                        <!-- çº¢è‰²ç®­å¤´ -->
                                        <div class="danger-arrow" id="bathroomDangerArrow1" style="top: 35%; left: 65%;"></div>
                                        <div class="danger-arrow" id="bathroomDangerArrow2" style="top: 35%; left: 25%; display: none;"></div>
                                        <!-- ä¼ æ„Ÿå™¨æ”¾ç½®åŒºåŸŸ -->
                                        <div class="sensor-drop-zone" id="bathroomDropZone1" style="top: 40%; left: 70%;"></div>
                                        <div class="sensor-drop-zone" id="bathroomDropZone2" style="top: 40%; left: 20%; display: none;"></div>
                                    </div>
                                    
                                    <!-- å³ä¾§é¢æ¿ -->
                                    <div class="side-panel" id="bathroomRightPanel">
                                        <!-- å†…å®¹å°†é€šè¿‡JavaScriptåŠ¨æ€ç”Ÿæˆ -->
                                    </div>
                                </div>
                                
                                <!-- åº•éƒ¨äº¤äº’åŒºåŸŸ -->
                                <div class="interaction-area">
                                    <h3>å®‰å…¨é˜²æŠ¤æ“ä½œåŒº</h3>
                                    <p id="bathroomInteractionText">ç‚¹å‡»æŒ‰é’®æ ‡è®°å«ç”Ÿé—´ä¸­çš„å±é™©åŒºåŸŸ</p>
                                    <div class="interaction-buttons">
                                        <button class="interaction-button" id="bathroomMarkDangerBtn">
                                            <i class="fas fa-exclamation-triangle"></i> æ ‡è®°å±é™©åŒºåŸŸ
                                        </button>
                                        <button class="interaction-button" id="bathroomResetBtn">
                                            <i class="fas fa-redo"></i> é‡ç½®
                                        </button>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- å§å®¤è¯¦æƒ… -->
                            <div class="room-detail" id="bedroomDetail">
                                <button class="back-button" id="backToInterior4">
                                    <i class="fas fa-arrow-left"></i>
                                </button>
                                <div class="room-header">
                                    <h2><i class="fas fa-bed"></i> å§å®¤å®‰å…¨åˆ†æ</h2>
                                    <p>"åœ¨å§å®¤ï¼Œæˆ‘ä»¬å¦‚ä½•å…³æ³¨è€äººçš„å¤œé—´å®‰å…¨ï¼Ÿ"</p>
                                </div>
                                <div class="room-content">
                                    <!-- å·¦ä¾§é¢æ¿ -->
                                    <div class="side-panel" id="bedroomLeftPanel">
                                        <!-- å†…å®¹å°†é€šè¿‡JavaScriptåŠ¨æ€ç”Ÿæˆ -->
                                    </div>
                                    
                                    <!-- ä¸­é—´åŒºåŸŸ - å§å®¤å›¾ç‰‡ -->
                                    <div class="room-image-container">
                                        <img src="https://p9-flow-imagex-sign.byteimg.com/ocean-cloud-tos/c8fbfc4e0b3143ce8b0d0ad5a62fba24preview.png~tplv-a9rns2rl98-downsize.png?rcl=021762854527124fdbddc03001b0b28000000000000001973f38d&rk3s=8e244e95&rrcfp=10c8fdaa&x-expires=2079078535&x-signature=I2ynZ1FexyLbpUd2K%2FV3FaFGaJA%3D" alt="å§å®¤å®‰å…¨åˆ†æ" class="room-image">
                                        <!-- çº¢è‰²ç®­å¤´ -->
                                        <div class="danger-arrow" id="bedroomDangerArrow1" style="top: 35%; left: 65%;"></div>
                                        <div class="danger-arrow" id="bedroomDangerArrow2" style="top: 35%; left: 25%; display: none;"></div>
                                        <!-- ä¼ æ„Ÿå™¨æ”¾ç½®åŒºåŸŸ -->
                                        <div class="sensor-drop-zone" id="bedroomDropZone1" style="top: 40%; left: 70%;"></div>
                                        <div class="sensor-drop-zone" id="bedroomDropZone2" style="top: 40%; left: 20%; display: none;"></div>
                                    </div>
                                    
                                    <!-- å³ä¾§é¢æ¿ -->
                                    <div class="side-panel" id="bedroomRightPanel">
                                        <!-- å†…å®¹å°†é€šè¿‡JavaScriptåŠ¨æ€ç”Ÿæˆ -->
                                    </div>
                                </div>
                                
                                <!-- åº•éƒ¨äº¤äº’åŒºåŸŸ -->
                                <div class="interaction-area">
                                    <h3>å®‰å…¨é˜²æŠ¤æ“ä½œåŒº</h3>
                                    <p id="bedroomInteractionText">ç‚¹å‡»æŒ‰é’®æ ‡è®°å§å®¤ä¸­çš„å±é™©åŒºåŸŸ</p>
                                    <div class="interaction-buttons">
                                        <button class="interaction-button" id="bedroomMarkDangerBtn">
                                            <i class="fas fa-exclamation-triangle"></i> æ ‡è®°å±é™©åŒºåŸŸ
                                        </button>
                                        <button class="interaction-button" id="bedroomResetBtn">
                                            <i class="fas fa-redo"></i> é‡ç½®
                                        </button>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- æˆåŠŸæ¶ˆæ¯ -->
                            <div class="success-message" id="successMessage">
                                <i class="fas fa-check-circle"></i><br>
                                æˆåŠŸå®‰è£…ä¼ æ„Ÿå™¨ï¼
                            </div>
                        </div>
                    </div>
                    
                    <div class="checklist">
                        <h3>ç³»ç»Ÿè®¾è®¡è“å›¾:</h3>
                        <div class="scene-item">
                            <span class="scene-label">æˆ‘ä»¬å°ç»„é‡ç‚¹å…³æ³¨çš„åœºæ™¯æ˜¯:</span> 
                            <select class="input-field" id="scene-select">
                                <option value="" selected disabled>-- è¯·é€‰æ‹©åœºæ™¯ --</option>
                                <option value="å®¢å…">å®¢å…</option>
                                <option value="å§å®¤">å§å®¤</option>
                                <option value="å«ç”Ÿé—´">å«ç”Ÿé—´</option>
                                <option value="å¨æˆ¿">å¨æˆ¿</option>
                            </select>
                        </div>
                        <div class="scene-item">
                            <span class="scene-label">åœ¨è¯¥åœºæ™¯ä¸‹ï¼Œè€äººæœ€å¯èƒ½é‡åˆ°çš„é£é™©æ˜¯:</span> 
                            <input type="text" class="input-field" id="risk-input" placeholder="ä¾‹å¦‚: æ‘”å€’ã€çªå‘ç–¾ç—…">
                        </div>
                        
                        <h4 class="mt-4">ç‰©è”ç½‘ä¸‰å±‚æ¶æ„è®¾è®¡:</h4>
                        <table class="design-table">
                            <thead>
                                <tr>
                                    <th>ç‰©è”ç½‘ä¸‰å±‚æ¶æ„</th>
                                    <th>ç¯èŠ‚</th>
                                    <th>æˆ‘ä»¬çš„è®¾è®¡</th>
                                    <th>æ³¨æ„äº‹é¡¹</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td rowspan="2">æ„ŸçŸ¥å±‚ï¼ˆä¿¡æ¯é‡‡é›†ï¼‰</td>
                                    <td>è€äººåœ¨è¿™ç§ç´§æ€¥æƒ…å†µä¸‹ï¼Œæœ€å¯èƒ½å–Šå‡ºçš„è¯­éŸ³æŒ‡ä»¤æ˜¯:</td>
                                    <td>
                                        <input type="text" class="input-field" placeholder="æŒ‡ä»¤1" id="cmd1">
                                        <input type="text" class="input-field" placeholder="æŒ‡ä»¤2" id="cmd2">
                                    </td>
                                    <td>æŒ‡ä»¤åº”ç®€çŸ­ã€é¡ºå£ã€ä¸æ˜“è¯¯è§¦å‘ã€‚</td>
                                </tr>
                                <tr>
                                    <td>è¡Œç©ºæ¿æ”¶åˆ°æ±‚æ•‘ä¿¡æ¯åï¼Œå‘å‡ºä»€ä¹ˆè¯­éŸ³å®‰æŠšè€äºº</td>
                                    <td>
                                        <input type="text" class="input-field" placeholder="æ’­æ”¾è¯­éŸ³" id="response-speech">
                                    </td>
                                    <td>æœ¬åœ°å“åº”å¯ä»¥è®©è€äººç¡®è®¤ç³»ç»Ÿå·²å¯åŠ¨ï¼Œç»™äºˆå®‰å…¨æ„Ÿã€‚</td>
                                </tr>
                                <tr>
                                    <td>ç½‘ç»œå±‚+åº”ç”¨å±‚ï¼ˆä¿¡æ¯ä¼ è¾“ä¸ä½¿ç”¨ï¼‰</td>
                                    <td>å‘é€ä»€ä¹ˆä¿¡æ¯ç»™å®¶äººæˆ–äº‘å¹³å°</td>
                                    <td><input type="text" class="input-field" placeholder="å‘é€å†…å®¹" id="cloud-data"></td>
                                    <td>æ•°æ®è¦åŒ…å«æœ€å…³é”®çš„ä¿¡æ¯ï¼Œè®©è¿œæ–¹ç›‘æŠ¤äººèƒ½å¿«é€Ÿäº†è§£æƒ…å†µã€‚</td>
                                </tr>
                            </tbody>
                        </table>
                        
                        <div class="check-item mt-3 highlight-completion highlight-warning">
                            <input type="checkbox" id="check2-1">
                            <label for="check2-1">æˆ‘ä»¬çš„è®¾è®¡è“å›¾å·²é€šè¿‡æŒ‡æŒ¥å®˜ï¼ˆè€å¸ˆï¼‰å®¡æ ¸ï¼</label>
                        </div>
                    </div>
                </div>
                
                <!-- è¿‡å…³ç¡®è®¤ -->
                <div class="level-completion" id="level-2-completion">
                    <div class="completion-icon">ğŸ“</div>
                    <div class="completion-title">ç¬¬äºŒå…³å®Œæˆï¼</div>
                    <div class="completion-message">æ‚¨å·²æˆåŠŸè®¾è®¡ç©ºå·¢è€äººå®‰å…¨ç³»ç»Ÿæ–¹æ¡ˆ</div>
                    <div class="completion-badge-preview">
                        <div>
                            <div class="badge-icon">ğŸ“</div>
                            <div>è®¾è®¡å¸ˆ</div>
                        </div>
                    </div>
                    <p>å·²è§£é”å‹‹ç« ï¼šè®¾è®¡å¸ˆ</p>
                </div>
                
                <div class="badges-container">
                    <div class="badge" id="badge-2">
                        <div>
                            <div class="badge-icon">ğŸ“</div>
                            <div>è®¾è®¡å¸ˆ</div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- å…³å¡3: åŠ¨æ‰‹æ­å»º -->
            <div class="level-content" id="level-3">
                <div class="mission-card">
                    <h2>ç¬¬ä¸‰å…³ï¼šåŠ¨æ‰‹æ­å»ºâ€”â€”æ¢ç©¶å®æ–½ï¼Œè”è°ƒç³»ç»Ÿ</h2>
                    <p><strong>ä»»åŠ¡ç›®æ ‡:</strong> ç¼–å†™ç¨‹åºå®ç°è¯­éŸ³è¯†åˆ«åŠŸèƒ½ï¼Œå¹¶å°†æ•°æ®ä¸Šä¼ åˆ°äº‘ç«¯ã€‚</p>
                    
                    <!-- ä»»åŠ¡å¯¼èˆª -->
                    <div class="task-navigation">
                        <button class="task-nav-btn active" id="task1-nav">ä»»åŠ¡ä¸€ï¼šè®©è¡Œç©ºæ¿"å­¦ä¼šå¬"</button>
                        <button class="task-nav-btn" id="task2-nav">ä»»åŠ¡äºŒï¼šå®ç°æ•°æ®ä¸Šäº‘</button>
                    </div>
                    
                    <!-- ä»»åŠ¡ä¸€å†…å®¹ -->
                    <div class="task-content active" id="task1-content">
                        <div class="task-card">
                            <div class="task-header">
                                <div class="task-title">ä»»åŠ¡ä¸€ï¼šç¼–å†™ç¨‹åºï¼Œè®©è¡Œç©ºæ¿"å­¦ä¼šå¬"</div>
                                <div class="task-status">
                                    <span class="task-status-badge status-inprogress" id="task1-status">è¿›è¡Œä¸­</span>
                                </div>
                            </div>
                            <p>å‡†ç¡®è¯†åˆ«è€äºº"æ•‘å‘½å•Š"ç­‰æ±‚åŠ©æŒ‡ä»¤ï¼Œè¾“å‡ºè¯†åˆ«ç»“æœ</p>
                            
                            <h4>è¡ŒåŠ¨æŒ‡å—:</h4>
                            <div class="task-step">
                                <p><strong>1.</strong> è¿æ¥è¡Œç©ºæ¿ï¼Œåœ¨Mind+ä¸­æ‰“å¼€"ä»»åŠ¡ä¸€"ç¨‹åº</p>
                                <img src="https://img-1372837879.cos.ap-guangzhou.myqcloud.com/img/202511212312353.png" alt="è¿æ¥è¡Œç©ºæ¿" class="guide-image">
                            </div>
                            <div class="task-step">
                                <p><strong>2.</strong> å‚ç…§ã€Šå®éªŒæ‰‹å†Œã€‹ï¼Œä¿®æ”¹ä»£ç ä¸­çš„å”¤é†’è¯å’Œè¯†åˆ«æŒ‡ä»¤</p>
                                <img src="https://cdn.nlark.com/yuque/0/2025/png/57681281/1763556066129-564bac4a-078b-4c18-a4d3-4da2cea5476d.png" alt="ä¿®æ”¹å”¤é†’è¯å’Œè¯†åˆ«æŒ‡ä»¤" class="guide-image">
                            </div>
                            <div class="task-step">
                                <p><strong>3.</strong> ä¸Šä¼ ç¨‹åºå¹¶æµ‹è¯•ï¼</p>
                                <img src="https://img-1372837879.cos.ap-guangzhou.myqcloud.com/img/202511212312125.png" alt="ä¸Šä¼ ç¨‹åºå¹¶æµ‹è¯•" class="guide-image">
                            </div>
                            
                            <div class="check-item mt-3 highlight-task-completion">
                                <input type="checkbox" id="check3-1">
                                <label for="check3-1">æˆ‘ä»¬æˆåŠŸè®©è¡Œç©ºæ¿"å¬æ‡‚"äº†æŒ‡ä»¤ï¼</label>
                            </div>
                            
                            <!-- ä»»åŠ¡ä¸€å®Œæˆæç¤º -->
                            <div id="task1-complete-message" class="task-unlock-message" style="display: none;">
                                <i class="fas fa-check-circle"></i> æ­å–œï¼ä»»åŠ¡ä¸€å·²å®Œæˆï¼Œç°åœ¨å¯ä»¥å¼€å§‹ä»»åŠ¡äºŒäº†ï¼
                            </div>
                        </div>
                    </div>
                    
                    <!-- ä»»åŠ¡äºŒå†…å®¹ -->
                    <div class="task-content" id="task2-content">
                        <div class="task-card task-locked" id="task2-card">
                            <div class="task-locked-overlay">è¯·å…ˆå®Œæˆä»»åŠ¡ä¸€</div>
                            <div class="task-header">
                                <div class="task-title">ä»»åŠ¡äºŒï¼šå®ç°è¡Œç©ºæ¿æ•°æ®ä¸Šäº‘</div>
                                <div class="task-status">
                                    <span class="task-status-badge" id="task2-status">é”å®šä¸­</span>
                                </div>
                            </div>
                            <p>å°†è¯­éŸ³è¯†åˆ«ç»“æœä¸ä¼ æ„Ÿå™¨æ•°æ®ä¸Šä¼ è‡³Easy IoTå¹³å°ï¼Œæ”¯æŒè¿œç¨‹æŸ¥çœ‹</p>
                            
                            <h4>è¡ŒåŠ¨æŒ‡å—:</h4>
                            
                            <div class="step-section">
                                <div class="step-title">ä¸€ã€ç¼–å†™ç¨‹åº</div>
                                <p>1. åœ¨ä»»åŠ¡ä¸€çš„åŸºç¡€ä¸Šï¼Œåœ¨å·¦ä¸‹è§’æ‰©å±•"ç½‘ç»œæœåŠ¡"ç•Œé¢ï¼Œé€‰æ‹©"MQTT"å’Œ"WI-FI"ä¸¤é¡¹æ‰©å±•</p>
                                <img src="https://img-1372837879.cos.ap-guangzhou.myqcloud.com/img/202511212311639.png" alt="ç½‘ç»œæœåŠ¡æ‰©å±•" class="guide-image">
                                <p>2. ç‚¹å‡»"è¿”å›"å›åˆ°ä¸»ç•Œé¢ï¼Œå·¦ä¾§ç§¯æœ¨æ ä¸­å¢åŠ äº†"æŒæ§"å’Œ"ç½‘ç»œæœåŠ¡"ä¸¤ä¸ªç§¯æœ¨ã€‚å…¶ä¸­ï¼Œ"ç½‘ç»œæœåŠ¡"åˆåŒ…æ‹¬äº†"MQTT"å’Œ"WI-FI"ä¸¤é¡¹æ‰©å±•ï¼Œåœ¨å·¦ä¾§ç½‘ç»œæœåŠ¡ä¸­å°†å›¾ä¸‹ç¨‹åºå—æ‹–åŠ¨åˆ°ç¼–ç¨‹ç•Œé¢ï¼Œä¿®æ”¹WIFIåç§°å¯†ç ã€‚</p>
                                <img src="https://img-1372837879.cos.ap-guangzhou.myqcloud.com/img/202511212311094.png" alt="ä¿®æ”¹WIFIé…ç½®" class="guide-image">
                            </div>
                            
                            <div class="step-section">
                                <div class="step-title">äºŒã€æ­å»ºåº”ç”¨å±‚å¹³å°</div>
                                <p>1. åœ¨å­¦ç”Ÿç´ ææ–‡ä»¶å¤¹ï¼Œæ‰“å¼€Easy Iotå¹³å°<br>
                                   ç½‘å€ï¼š<a href="https://iot.dfrobot.com.cn/index.html" target="_blank">https://iot.dfrobot.com.cn/index.html</a></p>
                                
                                <p>2. ç‚¹å‡»å·¥ä½œé—´â†’ç™»å½•è´¦å·â†’æ·»åŠ æ–°çš„è®¾å¤‡â†’éœ€ç‚¹å‡»çœ¼ç›å›¾æ ‡â†’æ˜¾ç¤ºç›¸åº”ä¿¡æ¯</p>
                                <img src="https://cdn.nlark.com/yuque/0/2025/png/57681281/1763556064420-d34d997f-5a22-40a6-96b7-a5155044ac10.png" alt="Easy IOTå¹³å°è®¾ç½®" class="guide-image">
                                
                                <p>3. ä½¿ç”¨Easy Iotè¿æ¥ç‰©è”ç½‘ï¼Œéœ€è¦ç”¨åˆ°(å›¾ä¸­æ ‡è®°çš„å‚æ•°éœ€è¦å¯¹åº”å¡«å…¥åˆ°mind+çš„MQTTåˆå§‹åŒ–å‚æ•°ï¼š<br>
                                   iot_idã€iot_pwdã€è¯é¢˜ï¼ˆtopicï¼‰</p>
                                <img src="https://img-1372837879.cos.ap-guangzhou.myqcloud.com/img/202511212311078.png" alt="MQTTå‚æ•°" class="guide-image">
                                
                                <p>4. å®Œæ•´ç¨‹åºå¦‚å›¾æ‰€ç¤º</p>
                                <img src="https://cdn.nlark.com/yuque/0/2025/png/57681281/1763556065189-54d8b2a9-33c7-4542-815d-139ed9ff8a22.png" alt="å®Œæ•´ç¨‹åº" class="guide-image">
                            </div>
                            
                            <div class="step-section">
                                <div class="step-title">å››ã€åˆ·å…¥ç¨‹åº</div>
                                <p>Mind+ç‚¹å‡»ä¸Šä¼ åˆ°è®¾å¤‡ï¼Œç¡®è®¤æ˜¯å¦ä¸Šä¼ æˆåŠŸ</p>
                            </div>
                            
                            <div class="step-section">
                                <div class="step-title">äº”ã€æµ‹è¯•å®éªŒç»“æœ</div>
                                <p>1. è¯´"ä½ å¥½å°è¡Œï¼ˆå°æ–°ï¼‰"ï¼Œè¿›å…¥å”¤é†’çŠ¶æ€ã€‚è¯´å¯¹åº”çš„è¯†åˆ«è¯ï¼Œå–‡å­æ’­æ”¾å¯¹åº”çš„å›åº”è¯ã€‚</p>
                                <p>2. è¿›å…¥Easy IOTå¹³å°â†’ç‚¹å‡»æŸ¥çœ‹è¯¦æƒ…â†’ç‚¹å‡»åˆ·æ–°â†’ç‚¹å‡»æŸ¥çœ‹ï¼ŒæŸ¥çœ‹æ˜¯å¦å·²ç»æ”¶åˆ°å¯¹åº”çš„å›åº”è¯ï¼Œæ”¶åˆ°å³å®éªŒæˆåŠŸï¼</p>
                                <img src="https://img-1372837879.cos.ap-guangzhou.myqcloud.com/img/202511212311010.png" alt="æŸ¥çœ‹å®éªŒç»“æœ" class="guide-image">
                            </div>
                            
                            <div class="check-item mt-3 highlight-task-completion task2">
                                <input type="checkbox" id="check3-2" disabled>
                                <label for="check3-2">æˆ‘ä»¬æˆåŠŸå°†æ•°æ®ä¸Šä¼ åˆ°äº‘ç«¯ï¼</label>
                            </div>

                            <!-- æŒ‘æˆ˜ä»»åŠ¡é€‰æ‹© -->
                            <div class="step-section">
                                <div class="step-title">å…­ã€æŒ‘æˆ˜ä»»åŠ¡ï¼ˆé€‰åšï¼‰</div>
                                <p>æ­å–œå®ŒæˆåŸºç¡€ä»»åŠ¡ï¼ç°åœ¨å¯ä»¥é€‰æ‹©ä¸€ä¸ªè¿›é˜¶æŒ‘æˆ˜æ¥æå‡ä½ çš„æŠ€èƒ½ï¼š</p>
                                
                                <div class="scene-item">
                                    <span class="scene-label">é€‰æ‹©æŒ‘æˆ˜ä»»åŠ¡:</span> 
                                    <select class="input-field" id="challenge-select">
                                        <option value="" selected disabled>-- è¯·é€‰æ‹©æŒ‘æˆ˜ä»»åŠ¡ --</option>
                                        <option value="challenge1">è¿›é˜¶æŒ‘æˆ˜ä¸€ï¼ˆæ¸©æ¹¿åº¦ä¼ æ„Ÿå™¨ç«ç¾æŠ¥è­¦ï¼‰</option>
                                        <option value="challenge2">è¿›é˜¶æŒ‘æˆ˜äºŒï¼ˆè¯­éŸ³æ§åˆ¶å¼€å…³ç¯ï¼‰</option>
                                        <option value="challenge3">è¿›é˜¶æŒ‘æˆ˜ä¸‰ï¼ˆæ£€æµ‹åŠ é€Ÿåº¦å€¼æ‘”å€’æŠ¥è­¦ï¼‰</option>
                                    </select>
                                </div>
                                
                                <!-- æŒ‘æˆ˜ä»»åŠ¡æè¿° -->
                                <div id="challenge-descriptions" style="margin-top: 15px;">
                                    <!-- æŒ‘æˆ˜ä¸€æè¿° -->
                                    <div id="challenge1-desc" class="mission-objective" style="display: none;">
                                        <h4>è¿›é˜¶æŒ‘æˆ˜ä¸€ï¼šæ¸©æ¹¿åº¦ä¼ æ„Ÿå™¨ç«ç¾æŠ¥è­¦</h4>
                                        <p><strong>ä»»åŠ¡æè¿°:</strong> ä½¿ç”¨K10è‡ªå¸¦çš„æ¸©æ¹¿åº¦ä¼ æ„Ÿå™¨ï¼Œå½“æ£€æµ‹åˆ°å¼‚å¸¸é«˜æ¸©æ—¶è‡ªåŠ¨è§¦å‘ç«ç¾æŠ¥è­¦ã€‚</p>
                                        <p><strong>å®ç°æ­¥éª¤:</strong></p>
                                        <ul>
                                            <li>1. åœ¨è¡Œç©ºæ¿æ¿è½½ä¼ æ„Ÿå™¨ä¸­é€‰æ‹©è¯»å–æ¸©åº¦ï¼ˆæ‘„æ°åº¦ï¼‰</li>
                                            <li>2. è®¾ç½®æ¸©åº¦é˜ˆå€¼ï¼ˆå¦‚35Â°Cï¼‰</li>
                                            <li>3. å½“æ¸©åº¦è¶…è¿‡é˜ˆå€¼æ—¶ï¼Œè‡ªåŠ¨å‘é€ç«ç¾è­¦æŠ¥åˆ°äº‘ç«¯</li>
                                            <li>4. è¡Œç©ºæ¿åŒæ—¶æ’­æ”¾è¯­éŸ³è­¦å‘Š</li>
                                        </ul>
                                        <p><strong>å‚è€ƒç¨‹åº:</strong></p>
                                        <img src="https://img-1372837879.cos.ap-guangzhou.myqcloud.com/img/202511212312449.png" alt="æ¸©æ¹¿åº¦ä¼ æ„Ÿå™¨ç«ç¾æŠ¥è­¦ç¨‹åº" class="guide-image">
                                    </div>
                                    
                                    <!-- æŒ‘æˆ˜äºŒæè¿° -->
                                    <div id="challenge2-desc" class="mission-objective" style="display: none;">
                                        <h4>è¿›é˜¶æŒ‘æˆ˜äºŒï¼šè¯­éŸ³æ§åˆ¶å¼€å…³ç¯</h4>
                                        <p><strong>ä»»åŠ¡æè¿°:</strong> å®ç°é€šè¿‡è¯­éŸ³æŒ‡ä»¤æ§åˆ¶LEDç¯çš„å¼€å…³ã€‚</p>
                                        <p><strong>å®ç°æ­¥éª¤:</strong></p>
                                        <ul>
                                            <li>1. ç‚¹å‡»å·¦è¾¹è¡Œç©ºæ¿K10ï¼Œæ‰¾åˆ°LEDæ§åˆ¶æ¨¡å—ï¼Œå…·ä½“ç¨‹åºå¦‚ä¸‹ï¼š</li>
                                        </ul>
                                        <img src="https://img-1372837879.cos.ap-guangzhou.myqcloud.com/img/202511212312331.png" alt="LEDæ§åˆ¶æ¨¡å—ç¨‹åº" class="guide-image">
                                        <ul>
                                            <li>2. è®­ç»ƒè¯­éŸ³è¯†åˆ«æ¨¡å—è¯†åˆ«"å¼€ç¯"ã€"å…³ç¯"æŒ‡ä»¤</li>
                                            <li>3. æ ¹æ®è¯­éŸ³æŒ‡ä»¤æ§åˆ¶LEDç¯çŠ¶æ€</li>
                                        </ul>
                                    </div>
                                    
                                    <!-- æŒ‘æˆ˜ä¸‰æè¿° -->
                                    <div id="challenge3-desc" class="mission-objective" style="display: none;">
                                        <h4>è¿›é˜¶æŒ‘æˆ˜ä¸‰ï¼šæ£€æµ‹åŠ é€Ÿåº¦å€¼æ‘”å€’æŠ¥è­¦</h4>
                                        <p><strong>ä»»åŠ¡æè¿°:</strong> åˆ©ç”¨è¡Œç©ºæ¿å†…ç½®çš„åŠ é€Ÿåº¦ä¼ æ„Ÿå™¨æ£€æµ‹è€äººæ‘”å€’åŠ¨ä½œã€‚</p>
                                        <p><strong>å®ç°æ­¥éª¤:</strong></p>
                                        <ul>
                                            <li>1. å¯ç”¨è¡Œç©ºæ¿å†…ç½®çš„åŠ é€Ÿåº¦ä¼ æ„Ÿå™¨</li>
                                            <li>2. è®¾ç½®åŠ é€Ÿåº¦é˜ˆå€¼ç®—æ³•æ£€æµ‹æ‘”å€’åŠ¨ä½œ</li>
                                            <li>3. æ£€æµ‹åˆ°æ‘”å€’æ—¶è‡ªåŠ¨å‘é€ç´§æ€¥æ±‚åŠ©ä¿¡æ¯</li>
                                            <li>4. ç»“åˆè¯­éŸ³è¯†åˆ«å®ç°åŒé‡ä¿é™©</li>
                                            <img src="https://img-1372837879.cos.ap-guangzhou.myqcloud.com/img/202511222327525.png" alt="åŠ é€Ÿåº¦ä¼ æ„Ÿå™¨ç¨‹åº" class="guide-image">
                                        </ul>
                                    </div>
                                </div>
                                
                                <div class="check-item mt-3 highlight-completion highlight-purple">
                                    <input type="checkbox" id="check3-3" disabled>
                                    <label for="check3-3">æˆ‘ä»¬å®Œæˆäº†é€‰åšçš„æŒ‘æˆ˜ä»»åŠ¡ï¼</label>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- è¿‡å…³ç¡®è®¤ -->
                <div class="level-completion" id="level-3-completion">
                    <div class="completion-icon">ğŸ”§</div>
                    <div class="completion-title">ç¬¬ä¸‰å…³å®Œæˆï¼</div>
                    <div class="completion-message">æ‚¨å·²æˆåŠŸæ­å»ºè¯­éŸ³è¯†åˆ«ç³»ç»Ÿå¹¶å®ç°æ•°æ®ä¸Šäº‘</div>
                    <div class="completion-badge-preview">
                        <div>
                            <div class="badge-icon">ğŸ‘‚</div>
                            <div>å¬è§‰ä¸“å®¶</div>
                        </div>
                    </div>
                    <p>å·²è§£é”å‹‹ç« ï¼šå¬è§‰ä¸“å®¶ & äº‘ç«¯ä¸“å®¶</p>
                </div>
                
                <div class="badges-container">
                    <div class="badge" id="badge-3">
                        <div>
                            <div class="badge-icon">ğŸ‘‚</div>
                            <div>å¬è§‰ä¸“å®¶</div>
                        </div>
                    </div>
                    <div class="badge" id="badge-4">
                        <div>
                            <div class="badge-icon">â˜ï¸</div>
                            <div>äº‘ç«¯ä¸“å®¶</div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- å…³å¡4: æˆæœå±•ç¤º -->
            <div class="level-content" id="level-4">
                <div class="mission-card">
                    <h2>ç¬¬å››å…³ï¼šæˆæœå±•ç¤ºâ€”â€”æˆå‹‹å¤§æ®¿</h2>
                    <p><strong>ä»»åŠ¡ç›®æ ‡:</strong> å‘æ‰€æœ‰å®ˆæŠ¤è€…å±•ç¤ºä½ ä»¬çš„æˆæœä¸æ™ºæ…§ã€‚</p>
                    
                    <div class="mission-objective">
                        <h3>è¡ŒåŠ¨æŒ‡å—:</h3>
                        <p>1. æˆæœå±•ç¤ºï¼šç°åœºæ¼”ç¤ºä½ çš„"å£°è”å®ˆæŠ¤"ç³»ç»Ÿã€‚</p>
                        <p>2. å¿ƒå¾—åˆ†äº«ï¼šåˆ†äº«é—¯å…³è¿‡ç¨‹ä¸­æœ€éš¾å¿˜çš„ä¸€ä¸ª"Boss"ï¼ˆéš¾é¢˜ï¼‰ä»¥åŠä½ ä»¬æ˜¯å¦‚ä½•å‡»è´¥å®ƒçš„ã€‚</p>
                    </div>
                    
                    <div class="checklist">
                        <h3>é¡¹ç›®æ€»ç»“:</h3>
                        <div class="scene-item">
                            <span class="scene-label">æˆ‘ä»¬å°ç»„é€‰æ‹©çš„æ˜¯:</span> 
                            <select class="input-field" id="final-scene">
                                <option value="" selected disabled>-- è¯·é€‰æ‹©åœºæ™¯ --</option>
                                <option value="å§å®¤">å§å®¤</option>
                                <option value="å«ç”Ÿé—´">å«ç”Ÿé—´</option>
                                <option value="å¨æˆ¿">å¨æˆ¿</option>
                                <option value="å®¢å…">å®¢å…</option>
                            </select>
                        </div>
                        <div class="scene-item">
                            <span class="scene-label">å®ç°åŠŸèƒ½:</span> 
                            <input type="text" class="input-field" id="final-function" placeholder="åŠŸèƒ½æè¿°">
                        </div>
                        <div class="scene-item">
                            <span class="scene-label">æˆ‘ä»¬è¿˜æ·»åŠ äº†åŠŸèƒ½:</span> 
                            <input type="text" class="input-field" id="final-extra" placeholder="é¢å¤–åŠŸèƒ½">
                        </div>
                        
                        <!-- æ–°å¢ï¼šæœ€éš¾Bosså’Œè§£å†³æ–¹æ³• -->
                        <div class="scene-item">
                            <span class="scene-label">åœ¨é—¯å…³è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬é‡åˆ°æœ€éš¾çš„ä¸€ä¸ª"Boss"ï¼ˆéš¾é¢˜ï¼‰æ˜¯:</span> 
                            <input type="text" class="input-field" id="final-boss" placeholder="æè¿°éš¾é¢˜">
                        </div>
                        <div class="scene-item">
                            <span class="scene-label">æˆ‘ä»¬é€šè¿‡:</span> 
                            <input type="text" class="input-field" id="final-solution" placeholder="è§£å†³æ–¹æ³•">
                            <span>çš„æ–¹æ³•æœ€ç»ˆå‡»è´¥äº†å®ƒï¼</span>
                        </div>
                        
                        <div class="check-item mt-3 highlight-completion highlight-info">
                            <input type="checkbox" id="check4-1">
                            <label for="check4-1">æˆ‘ä»¬æˆåŠŸå®Œæˆäº†ç³»ç»Ÿæ¼”ç¤ºï¼</label>
                        </div>
                    </div>
                </div>
                
                <!-- è¿‡å…³ç¡®è®¤ -->
                <div class="level-completion" id="level-4-completion">
                    <div class="completion-icon">ğŸ†</div>
                    <div class="completion-title">ç¬¬å››å…³å®Œæˆï¼</div>
                    <div class="completion-message">æ‚¨å·²æˆåŠŸå±•ç¤ºé¡¹ç›®æˆæœå¹¶åˆ†äº«å¿ƒå¾—</div>
                    <div class="completion-badge-preview">
                        <div>
                            <div class="badge-icon">ğŸ†</div>
                            <div>å±•ç¤ºä¸“å®¶</div>
                        </div>
                    </div>
                    <p>å·²è§£é”å‹‹ç« ï¼šå±•ç¤ºä¸“å®¶</p>
                </div>
                
                <div class="badges-container">
                    <div class="badge" id="badge-5">
                        <div>
                            <div class="badge-icon">ğŸ†</div>
                            <div>å±•ç¤ºä¸“å®¶</div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- å…³å¡5: æ€»ç»“æ‹“å±• -->
            <div class="level-content" id="level-5">
                <div class="completion-screen">
                    <div class="final-badge">
                        <div>
                            <div style="font-size: 40px; margin-bottom: 10px;">ğŸ“</div>
                            <div>å£°è”å®ˆæŠ¤<br>ç»ˆæå‹‹ç« </div>
                        </div>
                    </div>
                    
                    <h2>æ­å–œï¼<span id="final-team-name">--</span>å·²æˆåŠŸå®Œæˆæ‰€æœ‰æŒ‘æˆ˜ï¼</h2>
                    <p>ä½ ä»¬å·²æˆä¸ºåˆæ ¼çš„AIoTå®ˆæŠ¤è€…ï¼Œç”¨æŠ€æœ¯ä¼ é€’æ¸©æš–ï¼Œå®ˆæŠ¤ç©ºå·¢è€äººçš„å®‰å…¨ï¼</p>
                    
                    <div class="achievement-stats">
                        <div class="stat">
                            <div class="stat-value" id="badges-earned">0</div>
                            <div class="stat-label">å‹‹ç« è·å¾—</div>
                        </div>
                        <div class="stat">
                            <div class="stat-value" id="tasks-completed">0</div>
                            <div class="stat-label">ä»»åŠ¡å®Œæˆ</div>
                        </div>
                        <div class="stat">
                            <div class="stat-value" id="challenges-beaten">0</div>
                            <div class="stat-label">æŒ‘æˆ˜å‡»è´¥</div>
                        </div>
                    </div>
                    
                    <div class="mission-card mt-4">
                        <h3>å­¦ä¹ æ•ˆæœè¯„ä¼°ä¸åæ€</h3>
                        
                        <!-- é—®é¢˜1 -->
                        <div class="feedback-item">
                            <label class="feedback-label">1. é€šè¿‡æœ¬é¡¹ç›®ï¼Œæˆ‘å¯¹äººå·¥æ™ºèƒ½è¯­éŸ³è¯†åˆ«ä¸ç‰©è”ç½‘æŠ€æœ¯çš„ç†è§£æœ‰äº†æ˜æ˜¾åŠ æ·±ã€‚</label>
                            <div class="options-container">
                                <div class="option">
                                    <input type="radio" id="q1-5" name="question1" value="5">
                                    <label for="q1-5">éå¸¸åŒæ„</label>
                                </div>
                                <div class="option">
                                    <input type="radio" id="q1-4" name="question1" value="4">
                                    <label for="q1-4">åŒæ„</label>
                                </div>
                                <div class="option">
                                    <input type="radio" id="q1-3" name="question1" value="3">
                                    <label for="q1-3">ä¸€èˆ¬</label>
                                </div>
                                <div class="option">
                                    <input type="radio" id="q1-2" name="question1" value="2">
                                    <label for="q1-2">ä¸åŒæ„</label>
                                </div>
                                <div class="option">
                                    <input type="radio" id="q1-1" name="question1" value="1">
                                    <label for="q1-1">éå¸¸ä¸åŒæ„</label>
                                </div>
                            </div>
                        </div>
                        
                        <!-- é—®é¢˜2 -->
                        <div class="feedback-item">
                            <label class="feedback-label">2. æˆ‘èƒ½å¤Ÿæ¸…æ™°åœ°æè¿°"å£°è”å®ˆæŠ¤"ç³»ç»Ÿä¸­æ„ŸçŸ¥å±‚ã€ç½‘ç»œå±‚ã€åº”ç”¨å±‚å„è‡ªçš„ä½œç”¨ã€‚</label>
                            <div class="options-container">
                                <div class="option">
                                    <input type="radio" id="q2-5" name="question2" value="5">
                                    <label for="q2-5">éå¸¸åŒæ„</label>
                                </div>
                                <div class="option">
                                    <input type="radio" id="q2-4" name="question2" value="4">
                                    <label for="q2-4">åŒæ„</label>
                                </div>
                                <div class="option">
                                    <input type="radio" id="q2-3" name="question2" value="3">
                                    <label for="q2-3">ä¸€èˆ¬</label>
                                </div>
                                <div class="option">
                                    <input type="radio" id="q2-2" name="question2" value="2">
                                    <label for="q2-2">ä¸åŒæ„</label>
                                </div>
                                <div class="option">
                                    <input type="radio" id="q2-1" name="question2" value="1">
                                    <label for="q2-1">éå¸¸ä¸åŒæ„</label>
                                </div>
                            </div>
                        </div>
                        
                        <!-- é—®é¢˜3 -->
                        <div class="feedback-item">
                            <label class="feedback-label">3. åœ¨å®Œæˆæœ¬é¡¹ç›®åï¼Œæˆ‘æŒæ¡æˆ–æå‡äº†ä»¥ä¸‹å“ªäº›æŠ€èƒ½ï¼Ÿï¼ˆå¯å¤šé€‰ï¼‰</label>
                            <div class="options-container">
                                <div class="option">
                                    <input type="checkbox" id="skill1" name="skills" value="mindplus">
                                    <label for="skill1">ä½¿ç”¨Mind+è¿›è¡Œå›¾å½¢åŒ–ç¼–ç¨‹</label>
                                </div>
                                <div class="option">
                                    <input type="checkbox" id="skill2" name="skills" value="speech">
                                    <label for="skill2">é…ç½®å’Œä½¿ç”¨è¯­éŸ³è¯†åˆ«æ¨¡å—</label>
                                </div>
                                <div class="option">
                                    <input type="checkbox" id="skill3" name="skills" value="mqtt">
                                    <label for="skill3">ç†è§£å¹¶é…ç½®MQTTåè®®å‚æ•°</label>
                                </div>
                                <div class="option">
                                    <input type="checkbox" id="skill4" name="skills" value="iot">
                                    <label for="skill4">å°†ç¡¬ä»¶è®¾å¤‡æ•°æ®ä¸Šä¼ è‡³äº‘å¹³å°(Easy IoT)</label>
                                </div>
                                <div class="option">
                                    <input type="checkbox" id="skill5" name="skills" value="debug">
                                    <label for="skill5">è½¯ç¡¬ä»¶è”è°ƒä¸æ•…éšœæ’æŸ¥</label>
                                </div>
                                <div class="option">
                                    <input type="checkbox" id="skill6" name="skills" value="teamwork">
                                    <label for="skill6">å›¢é˜Ÿåä½œä¸é¡¹ç›®è§„åˆ’</label>
                                </div>
                            </div>
                        </div>
                        
                        <!-- é—®é¢˜4 -->
                        <div class="feedback-item">
                            <label class="feedback-label">4. ä½ è®¤ä¸ºè¯¾ç¨‹ä¸­å“ªä¸ªç¯èŠ‚æŒ‘æˆ˜æœ€å¤§ï¼Ÿ</label>
                            <div class="options-container">
                                <div class="option">
                                    <input type="radio" id="challenge1" name="challenge" value="design">
                                    <label for="challenge1">æ–¹æ¡ˆè®¾è®¡ï¼ˆå°†æƒ³æ³•è½¬åŒ–ä¸ºå…·ä½“æ–¹æ¡ˆï¼‰</label>
                                </div>
                                <div class="option">
                                    <input type="radio" id="challenge2" name="challenge" value="speech">
                                    <label for="challenge2">è¯­éŸ³è¯†åˆ«ç¨‹åºç¼–å†™ä¸è°ƒè¯•</label>
                                </div>
                                <div class="option">
                                    <input type="radio" id="challenge3" name="challenge" value="mqtt">
                                    <label for="challenge3">MQTTå‚æ•°é…ç½®ä¸è”ç½‘</label>
                                </div>
                                <div class="option">
                                    <input type="radio" id="challenge4" name="challenge" value="debug">
                                    <label for="challenge4">è½¯ç¡¬ä»¶è”åˆè°ƒè¯•</label>
                                </div>
                                <div class="option">
                                    <input type="radio" id="challenge5" name="challenge" value="none">
                                    <label for="challenge5">æ²¡æœ‰ç‰¹åˆ«å›°éš¾çš„ç¯èŠ‚</label>
                                </div>
                            </div>
                        </div>
                        
                        <!-- é—®é¢˜5 -->
                        <div class="feedback-item">
                            <label class="feedback-label">5. å¦‚æœå¯ä»¥ä¸º"å£°è”å®ˆæŠ¤"ç³»ç»Ÿå¢åŠ ä¸€é¡¹æ–°åŠŸèƒ½ï¼Œä½ å¸Œæœ›æ˜¯ä»€ä¹ˆï¼Ÿï¼ˆä¾‹å¦‚ï¼šè‡ªåŠ¨æ‹¨æ‰“æ±‚æ•‘ç”µè¯ã€å¢åŠ ç¯å¢ƒä¼ æ„Ÿå™¨(çƒŸé›¾ã€ç…¤æ°”)ã€èƒ½ç”¨è¯­éŸ³èŠå¤©é™ªä¼´è€äººç­‰ï¼‰</label>
                            <textarea class="feedback-input" rows="3" id="new-feature" placeholder="è¯·æè¿°ä½ å¸Œæœ›å¢åŠ çš„æ–°åŠŸèƒ½..."></textarea>
                        </div>
                        
                        <!-- é—®é¢˜6 -->
                        <div class="feedback-item">
                            <label class="feedback-label">6. é€šè¿‡æœ¬èŠ‚è¯¾ï¼Œä½ å¯¹"æŠ€æœ¯æœåŠ¡äºäºº"çš„ç†è§£æœ‰å“ªäº›æ–°çš„æ”¶è·ï¼Ÿ</label>
                            <textarea class="feedback-input" rows="3" id="value-insight" placeholder="åˆ†äº«ä½ çš„ç†è§£..."></textarea>
                        </div>
                        
                        <div class="check-item mt-3 highlight-completion highlight-warning">
                            <input type="checkbox" id="check5-1">
                            <label for="check5-1">æˆ‘å·²å®Œæˆå­¦ä¹ æ•ˆæœè¯„ä¼°ä¸åæ€ï¼</label>
                        </div>
                    </div>
                    
                    <div class="mission-card mt-4">
                        <h4>æŒ‡æŒ¥å®˜å¯„è¯­:</h4>
                        <p style="font-style: italic;">
                            æŠ€æœ¯æ˜¯å†°å†·çš„ï¼Œä½†ä½ ä»¬èµ‹äºˆå®ƒçš„è®¾è®¡ä¸å…³æ€€ï¼Œè®©å®ƒæ‹¥æœ‰äº†æ¸©åº¦ã€‚
                            æ„Ÿè°¢æ¯ä¸€ä½å®ˆæŠ¤è€…çš„åŠªåŠ›ï¼Œä½ ä»¬ä¸ä»…æ˜¯æŠ€æœ¯çš„æŒæ§è€…ï¼Œæ›´æ˜¯æ¸©æš–çš„ä¼ é€’è€…ï¼
                        </p>
                    </div>
                </div>
                
                <!-- è¿‡å…³ç¡®è®¤ -->
                <div class="level-completion" id="level-5-completion">
                    <div class="completion-icon">ğŸ¤”</div>
                    <div class="completion-title">ç¬¬äº”å…³å®Œæˆï¼</div>
                    <div class="completion-message">æ‚¨å·²å®Œæˆè¯¾ç¨‹æ€»ç»“ä¸åæ€</div>
                    <div class="completion-badge-preview">
                        <div>
                            <div class="badge-icon">ğŸ¤”</div>
                            <div>åæ€è€…</div>
                        </div>
                    </div>
                    <p>å·²è§£é”å‹‹ç« ï¼šåæ€è€…</p>
                </div>
                
                <div class="badges-container">
                    <div class="badge" id="badge-6">
                        <div>
                            <div class="badge-icon">ğŸ¤”</div>
                            <div>åæ€è€…</div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- å…³å¡6: æ•™å­¦è¯„ä»· -->
            <div class="level-content" id="level-6">
                <div class="completion-screen">
                    <div class="evaluation-badge">
                        <div>
                            <div style="font-size: 40px; margin-bottom: 5px;">â­</div>
                            <div>æ•™å­¦è¯„ä»·</div>
                        </div>
                    </div>
                    
                    <h2>æ•™å­¦è¯„ä»·ä¸åé¦ˆ</h2>
                    <p>è¯·å¯¹æœ¬æ¬¡è¯¾ç¨‹çš„æ•™å­¦è´¨é‡è¿›è¡Œè¯„ä»·ï¼Œå¸®åŠ©æˆ‘ä»¬ä¸æ–­æ”¹è¿›æ•™å­¦æ–¹æ³•å’Œå†…å®¹</p>
                    
                    <div class="evaluation-form">
                        <h3>æ•™å­¦è¯„ä»·è¡¨</h3>
                        
                        <div class="rating-container">
                            <div class="rating-item">
                                <div class="rating-label">æ•™å­¦å†…å®¹è®¾è®¡</div>
                                <div class="rating-stars" id="content-design-rating">
                                    <span class="star" data-value="1">â˜…</span>
                                    <span class="star" data-value="2">â˜…</span>
                                    <span class="star" data-value="3">â˜…</span>
                                    <span class="star" data-value="4">â˜…</span>
                                    <span class="star" data-value="5">â˜…</span>
                                </div>
                            </div>
                            
                            <div class="rating-item">
                                <div class="rating-label">æ•™å­¦æ–¹æ³•ä¸æŒ‡å¯¼</div>
                                <div class="rating-stars" id="teaching-method-rating">
                                    <span class="star" data-value="1">â˜…</span>
                                    <span class="star" data-value="2">â˜…</span>
                                    <span class="star" data-value="3">â˜…</span>
                                    <span class="star" data-value="4">â˜…</span>
                                    <span class="star" data-value="5">â˜…</span>
                                </div>
                            </div>
                            
                            <div class="rating-item">
                                <div class="rating-label">å®è·µç¯èŠ‚å®‰æ’</div>
                                <div class="rating-stars" id="practice-arrangement-rating">
                                    <span class="star" data-value="1">â˜…</span>
                                    <span class="star" data-value="2">â˜…</span>
                                    <span class="star" data-value="3">â˜…</span>
                                    <span class="star" data-value="4">â˜…</span>
                                    <span class="star" data-value="5">â˜…</span>
                                </div>
                            </div>
                        </div>
                        
                        <div class="feedback-section">
                            <div class="feedback-title">è¯¦ç»†åé¦ˆ</div>
                            
                            <div class="feedback-item">
                                <label class="feedback-label">æ‚¨è®¤ä¸ºæœ¬è¯¾ç¨‹çš„æ•™å­¦æœ‰å“ªäº›ä¼˜ç‚¹ï¼Ÿ</label>
                                <textarea class="feedback-input" rows="3" id="teaching-advantages" placeholder="è¯·åˆ†äº«æ‚¨çš„çœ‹æ³•..."></textarea>
                            </div>
                            
                            <div class="feedback-item">
                                <label class="feedback-label">æ‚¨è®¤ä¸ºæœ¬è¯¾ç¨‹çš„æ•™å­¦æœ‰å“ªäº›å¯ä»¥æ”¹è¿›çš„åœ°æ–¹ï¼Ÿ</label>
                                <textarea class="feedback-input" rows="3" id="teaching-improvements" placeholder="è¯·æå‡ºæ‚¨çš„å»ºè®®..."></textarea>
                            </div>
                        </div>
                        
                        <div class="check-item mt-4">
                            <input type="checkbox" id="check6-1">
                            <label for="check6-1">æˆ‘å·²è®¤çœŸå®Œæˆæ•™å­¦è¯„ä»·ï¼</label>
                        </div>
                    </div>
                    
                    <div class="mission-card mt-4">
                        <h4>æ„Ÿè°¢æ‚¨çš„åé¦ˆï¼</h4>
                        <p>æ‚¨çš„è¯„ä»·å°†å¸®åŠ©æˆ‘ä»¬ä¸æ–­æ”¹è¿›æ•™å­¦å†…å®¹ä¸æ•™å­¦æ–¹æ³•ï¼Œä¸ºæ›´å¤šå­¦ç”Ÿæä¾›ä¼˜è´¨çš„å­¦ä¹ ä½“éªŒã€‚</p>
                    </div>
                    
                    <div style="margin-top: 30px;">
                        <button class="btn btn-complete" onclick="restartGame()">é‡æ–°å¼€å§‹æŒ‘æˆ˜</button>
                    </div>
                </div>
                
                <!-- è¿‡å…³ç¡®è®¤ -->
                <div class="level-completion" id="level-6-completion">
                    <div class="completion-icon">ğŸ“</div>
                    <div class="completion-title">ç¬¬å…­å…³å®Œæˆï¼</div>
                    <div class="completion-message">æ‚¨å·²å®Œæˆæ•™å­¦è¯„ä»·ä¸åé¦ˆ</div>
                    <div class="completion-badge-preview">
                        <div>
                            <div class="badge-icon">ğŸ“</div>
                            <div>è¯„ä»·è€…</div>
                        </div>
                    </div>
                    <p>å·²è§£é”å‹‹ç« ï¼šè¯„ä»·è€…</p>
                </div>
                
                <div class="badges-container">
                    <div class="badge" id="badge-7">
                        <div>
                            <div class="badge-icon">ğŸ“</div>
                            <div>è¯„ä»·è€…</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- æ§åˆ¶æŒ‰é’® -->
        <div class="game-controls">
            <button class="btn btn-prev" id="prev-btn" onclick="prevLevel()">ä¸Šä¸€å…³</button>
            <button class="btn btn-next" id="next-btn" onclick="nextLevel()">ä¸‹ä¸€å…³</button>
        </div>
    </div>

    <script>
        // æ¸¸æˆçŠ¶æ€
        let currentLevel = 1;
        const totalLevels = 6;
        const badges = [
            { id: 1, name: "æ´å¯Ÿè€…", icon: "ğŸ”", earned: false },
            { id: 2, name: "è®¾è®¡å¸ˆ", icon: "ğŸ“", earned: false },
            { id: 3, name: "å¬è§‰ä¸“å®¶", icon: "ğŸ‘‚", earned: false },
            { id: 4, name: "äº‘ç«¯ä¸“å®¶", icon: "â˜ï¸", earned: false },
            { id: 5, name: "å±•ç¤ºä¸“å®¶", icon: "ğŸ†", earned: false },
            { id: 6, name: "åæ€è€…", icon: "ğŸ¤”", earned: false },
            { id: 7, name: "è¯„ä»·è€…", icon: "ğŸ“", earned: false }
        ];

        // åˆå§‹åŒ–æ¸¸æˆ
        function initGame() {
            updateProgress();
            updateNavigation();
            loadGameState();
            
            // ç›‘å¬å°ç»„é€‰æ‹©å˜åŒ–
            document.getElementById('group-select').addEventListener('change', saveGameState);
            
            // ç›‘å¬æ‰€æœ‰è¾“å…¥æ¡†å˜åŒ–
            document.querySelectorAll('input, select, textarea').forEach(input => {
                input.addEventListener('input', saveGameState);
                input.addEventListener('change', saveGameState);
            });
            
            // ç›‘å¬å•é€‰æŒ‰é’®å˜åŒ–
            document.querySelectorAll('input[type="radio"]').forEach(radio => {
                radio.addEventListener('change', function() {
                    // æ›´æ–°é€‰é¡¹çš„è§†è§‰çŠ¶æ€
                    document.querySelectorAll('.option').forEach(option => {
                        option.classList.remove('selected');
                    });
                    if (this.checked) {
                        this.closest('.option').classList.add('selected');
                    }
                    
                    saveGameState();
                    updateNavigation();
                    updateLevelCompletion();
                });
            });
            
            // ç›‘å¬ç¬¬ä¸‰å…³ä»»åŠ¡çŠ¶æ€å˜åŒ–
            document.getElementById('check3-1').addEventListener('change', function() {
                updateTaskStatus();
                if (this.checked) {
                    unlockTask2();
                }
                updateLevelCompletion();
            });
            document.getElementById('check3-2').addEventListener('change', function() {
                updateTaskStatus();
                updateLevelCompletion();
            });

            // ç›‘å¬æŒ‘æˆ˜ä»»åŠ¡é€‰æ‹©å˜åŒ–
            document.getElementById('challenge-select').addEventListener('change', function() {
                // éšè—æ‰€æœ‰æŒ‘æˆ˜æè¿°
                document.querySelectorAll('#challenge-descriptions > div').forEach(desc => {
                    desc.style.display = 'none';
                });
                
                // æ˜¾ç¤ºé€‰ä¸­çš„æŒ‘æˆ˜æè¿°
                const selectedChallenge = this.value;
                if (selectedChallenge) {
                    document.getElementById(`${selectedChallenge}-desc`).style.display = 'block';
                    document.getElementById('check3-3').disabled = false;
                }
                
                saveGameState();
            });

            // ç›‘å¬æŒ‘æˆ˜ä»»åŠ¡å®ŒæˆçŠ¶æ€
            document.getElementById('check3-3').addEventListener('change', function() {
                updateLevelCompletion();
                saveGameState();
            });
            
            // ç›‘å¬æ‰€æœ‰å¤é€‰æ¡†å˜åŒ–
            document.querySelectorAll('input[type="checkbox"]').forEach(checkbox => {
                checkbox.addEventListener('change', function() {
                    updateLevelCompletion();
                });
            });
            
            // åˆå§‹åŒ–ä»»åŠ¡å¯¼èˆª
            initTaskNavigation();
            
            // åˆå§‹åŒ–æ˜Ÿçº§è¯„åˆ†
            initStarRatings();
            
            // åˆå§‹åŒ–ç©ºå·¢è€äººå®‰å…¨ç®¡ç†ç³»ç»Ÿ
            initRoomSystem();
            
            // åˆå§‹æ›´æ–°å…³å¡å®ŒæˆçŠ¶æ€
            updateLevelCompletion();
        }

        // åˆå§‹åŒ–ä»»åŠ¡å¯¼èˆª
        function initTaskNavigation() {
            const task1Nav = document.getElementById('task1-nav');
            const task2Nav = document.getElementById('task2-nav');
            const task1Content = document.getElementById('task1-content');
            const task2Content = document.getElementById('task2-content');
            
            task1Nav.addEventListener('click', function() {
                task1Nav.classList.add('active');
                task2Nav.classList.remove('active');
                task1Content.classList.add('active');
                task2Content.classList.remove('active');
            });
            
            task2Nav.addEventListener('click', function() {
                // æ£€æŸ¥ä»»åŠ¡ä¸€æ˜¯å¦å®Œæˆ
                const task1Completed = document.getElementById('check3-1').checked;
                if (task1Completed) {
                    task2Nav.classList.add('active');
                    task1Nav.classList.remove('active');
                    task2Content.classList.add('active');
                    task1Content.classList.remove('active');
                } else {
                    alert('è¯·å…ˆå®Œæˆä»»åŠ¡ä¸€ï¼');
                }
            });
        }

        // è§£é”ä»»åŠ¡äºŒ
        function unlockTask2() {
            const task2Card = document.getElementById('task2-card');
            const task2Checkbox = document.getElementById('check3-2');
            const task1CompleteMessage = document.getElementById('task1-complete-message');
            
            // è§£é”ä»»åŠ¡äºŒ
            task2Card.classList.remove('task-locked');
            task2Checkbox.disabled = false;
            
            // æ˜¾ç¤ºä»»åŠ¡ä¸€å®Œæˆæ¶ˆæ¯
            task1CompleteMessage.style.display = 'block';
            
            // æ›´æ–°ä»»åŠ¡çŠ¶æ€
            document.getElementById('task2-status').textContent = 'è¿›è¡Œä¸­';
            document.getElementById('task2-status').className = 'task-status-badge status-inprogress';
            
            // è‡ªåŠ¨åˆ‡æ¢åˆ°ä»»åŠ¡äºŒ
            const task2Nav = document.getElementById('task2-nav');
            const task1Nav = document.getElementById('task1-nav');
            const task1Content = document.getElementById('task1-content');
            const task2Content = document.getElementById('task2-content');
            
            task2Nav.classList.add('active');
            task1Nav.classList.remove('active');
            task2Content.classList.add('active');
            task1Content.classList.remove('active');
            
            // ä¿å­˜çŠ¶æ€
            saveGameState();
            updateNavigation();
        }

        // åˆå§‹åŒ–ç©ºå·¢è€äººå®‰å…¨ç®¡ç†ç³»ç»Ÿ
        function initRoomSystem() {
            // æˆ¿é—´ç®¡ç†ç±»
            class RoomManager {
                constructor(roomName) {
                    this.roomName = roomName;
                    this.currentDanger = 1;
                    this.sensorsPlaced = 0;
                    
                    // è·å–DOMå…ƒç´ 
                    this.markDangerBtn = document.getElementById(`${roomName}MarkDangerBtn`);
                    this.resetBtn = document.getElementById(`${roomName}ResetBtn`);
                    this.dangerArrow1 = document.getElementById(`${roomName}DangerArrow1`);
                    this.dangerArrow2 = document.getElementById(`${roomName}DangerArrow2`);
                    this.interactionText = document.getElementById(`${roomName}InteractionText`);
                    this.leftPanel = document.getElementById(`${roomName}LeftPanel`);
                    this.rightPanel = document.getElementById(`${roomName}RightPanel`);
                    this.dropZone1 = document.getElementById(`${roomName}DropZone1`);
                    this.dropZone2 = document.getElementById(`${roomName}DropZone2`);
                    
                    // ä¼ æ„Ÿå™¨æ•°æ®
                    this.danger1Sensors = this.getDanger1Sensors();
                    this.danger2Sensors = this.getDanger2Sensors();
                    
                    // ç»‘å®šäº‹ä»¶
                    this.bindEvents();
                }
                
                getDanger1Sensors() {
                    // æ¯ä¸ªæˆ¿é—´çš„ç¬¬ä¸€ä¸ªå±é™©åœºæ™¯ä¼ æ„Ÿå™¨
                    const sensors = {
                        'livingRoom': [
                            { name: 'æ¸©åº¦ä¼ æ„Ÿå™¨', icon: 'fas fa-thermometer-half', correct: true },
                            { name: 'åœŸå£¤æ¹¿åº¦ä¼ æ„Ÿå™¨', icon: 'fas fa-seedling', correct: false },
                            { name: 'é¢œè‰²ä¼ æ„Ÿå™¨', icon: 'fas fa-palette', correct: false }
                        ],
                        'kitchen': [
                            // å¨æˆ¿ç¬¬ä¸€ä¸ªå±é™©åŒºåŸŸï¼šç‡ƒæ°”æ³„æ¼
                            { name: 'ç‡ƒæ°”ä¼ æ„Ÿå™¨', icon: 'fas fa-fire', correct: true },
                            { name: 'æŒ‡çº¹ä¼ æ„Ÿå™¨', icon: 'fas fa-fingerprint', correct: false },
                            { name: 'å£°éŸ³ä¼ æ„Ÿå™¨', icon: 'fas fa-volume-up', correct: false }
                        ],
                        'bathroom': [
                            { name: 'æ°´æµ¸ä¼ æ„Ÿå™¨', icon: 'fas fa-tint', correct: true },
                            { name: 'åœŸå£¤æ¹¿åº¦ä¼ æ„Ÿå™¨', icon: 'fas fa-seedling', correct: false },
                            { name: 'é¢œè‰²ä¼ æ„Ÿå™¨', icon: 'fas fa-palette', correct: false }
                        ],
                        'bedroom': [
                            { name: 'æ™ºèƒ½å¤œç¯', icon: 'fas fa-lightbulb', correct: true },
                            { name: 'æŒ‡çº¹ä¼ æ„Ÿå™¨', icon: 'fas fa-fingerprint', correct: false },
                            { name: 'å£°éŸ³ä¼ æ„Ÿå™¨', icon: 'fas fa-volume-up', correct: false }
                        ]
                    };
                    return sensors[this.roomName] || [];
                }
                
                getDanger2Sensors() {
                    // æ¯ä¸ªæˆ¿é—´çš„ç¬¬äºŒä¸ªå±é™©åœºæ™¯ä¼ æ„Ÿå™¨
                    const sensors = {
                        'livingRoom': [
                            { name: 'æ™ºèƒ½æ‘„åƒå¤´', icon: 'fas fa-video', correct: true },
                            { name: 'æŒ‡çº¹ä¼ æ„Ÿå™¨', icon: 'fas fa-fingerprint', correct: false },
                            { name: 'å£°éŸ³ä¼ æ„Ÿå™¨', icon: 'fas fa-volume-up', correct: false }
                        ],
                        'kitchen': [
                            // å¨æˆ¿ç¬¬äºŒä¸ªå±é™©åŒºåŸŸï¼šå¿˜è®°å…³ç«å¯¼è‡´å¹²çƒ§ - ä½¿ç”¨ç«ç„°ä¼ æ„Ÿå™¨
                            { name: 'ç«ç„°ä¼ æ„Ÿå™¨', icon: 'fas fa-fire', correct: true },
                            { name: 'åœŸå£¤æ¹¿åº¦ä¼ æ„Ÿå™¨', icon: 'fas fa-seedling', correct: false },
                            { name: 'é¢œè‰²ä¼ æ„Ÿå™¨', icon: 'fas fa-palette', correct: false }
                        ],
                        'bathroom': [
                            { name: 'ç”µå‹ä¼ æ„Ÿå™¨', icon: 'fas fa-bolt', correct: true },
                            { name: 'æŒ‡çº¹ä¼ æ„Ÿå™¨', icon: 'fas fa-fingerprint', correct: false },
                            { name: 'å£°éŸ³ä¼ æ„Ÿå™¨', icon: 'fas fa-volume-up', correct: false }
                        ],
                        'bedroom': [
                            { name: 'å‹åŠ›åºŠå«ä¼ æ„Ÿå™¨', icon: 'fas fa-bed', correct: true },
                            { name: 'åœŸå£¤æ¹¿åº¦ä¼ æ„Ÿå™¨', icon: 'fas fa-seedling', correct: false },
                            { name: 'é¢œè‰²ä¼ æ„Ÿå™¨', icon: 'fas fa-palette', correct: false }
                        ]
                    };
                    return sensors[this.roomName] || [];
                }
                
                bindEvents() {
                    this.markDangerBtn.addEventListener('click', () => this.markDanger());
                    this.resetBtn.addEventListener('click', () => this.reset());
                    
                    // è®¾ç½®æ‹–æ”¾åŒºåŸŸ
                    [this.dropZone1, this.dropZone2].forEach(zone => {
                        zone.addEventListener('dragover', (e) => {
                            e.preventDefault();
                            zone.style.border = '3px solid #3498db';
                            zone.style.background = 'rgba(52, 152, 219, 0.2)';
                        });
                        
                        zone.addEventListener('dragleave', () => {
                            zone.style.border = '4px dashed #2ecc71';
                            zone.style.background = 'rgba(46, 204, 113, 0.15)';
                        });
                        
                        zone.addEventListener('drop', (e) => this.handleDrop(e, zone));
                    });
                }
                
                markDanger() {
                    if (this.currentDanger === 1) {
                        // æ˜¾ç¤ºç¬¬ä¸€ä¸ªå±é™©åŒºåŸŸ
                        this.dangerArrow1.style.display = 'block';
                        this.dropZone1.style.display = 'flex';
                        this.dropZone1.innerHTML = '';
                        
                        // æ˜¾ç¤ºå±é™©è§£é‡Šå’Œä¼ æ„Ÿå™¨é€‰æ‹©
                        this.showDangerExplanation(this.rightPanel, 1);
                        this.showSensorSelection(this.leftPanel, 1);
                        
                        // æ›´æ”¹æŒ‰é’®æ–‡æœ¬
                        this.markDangerBtn.innerHTML = '<i class="fas fa-exclamation-triangle"></i> æ ‡è®°ä¸‹ä¸€ä¸ªå±é™©åŒºåŸŸ';
                        this.currentDanger = 2;
                        
                        // æ›´æ–°äº¤äº’æ–‡æœ¬
                        this.interactionText.textContent = 'å·²æ ‡è®°ç¬¬ä¸€ä¸ªå±é™©åŒºåŸŸï¼Œè¯·ç»§ç»­æ ‡è®°ä¸‹ä¸€ä¸ª';
                        this.interactionText.style.fontWeight = 'bold';
                        
                    } else if (this.currentDanger === 2) {
                        // æ¸…é™¤ç¬¬ä¸€ä¸ªå±é™©åŒºåŸŸçš„å†…å®¹
                        this.leftPanel.innerHTML = '';
                        this.rightPanel.innerHTML = '';
                        
                        // æ˜¾ç¤ºç¬¬äºŒä¸ªå±é™©åŒºåŸŸ
                        this.dangerArrow2.style.display = 'block';
                        this.dropZone2.style.display = 'flex';
                        this.dropZone2.innerHTML = '';
                        
                        // æ˜¾ç¤ºå±é™©è§£é‡Šå’Œä¼ æ„Ÿå™¨é€‰æ‹©
                        this.showDangerExplanation(this.leftPanel, 2);
                        this.showSensorSelection(this.rightPanel, 2);
                        
                        // æ›´æ”¹æŒ‰é’®æ–‡æœ¬
                        this.markDangerBtn.innerHTML = '<i class="fas fa-check"></i> å®Œæˆ';
                        this.currentDanger = 3;
                        
                        // æ›´æ–°äº¤äº’æ–‡æœ¬
                        this.interactionText.textContent = 'å·²æ ‡è®°ç¬¬äºŒä¸ªå±é™©åŒºåŸŸï¼Œç‚¹å‡»å®Œæˆç»“æŸæ ‡è®°';
                        this.interactionText.style.fontWeight = 'bold';
                        
                    } else {
                        // å®Œæˆæ‰€æœ‰å±é™©æ ‡è®°
                        this.markDangerBtn.disabled = true;
                        this.interactionText.textContent = 'ğŸ‰ æ‰€æœ‰å±é™©åŒºåŸŸå·²æ ‡è®°å®Œæˆï¼';
                        this.interactionText.style.fontWeight = 'bold';
                        this.interactionText.style.color = '#27ae60';
                    }
                }
                
                reset() {
                    // éšè—æ‰€æœ‰å±é™©æ ‡è®°
                    this.dangerArrow1.style.display = 'none';
                    this.dangerArrow2.style.display = 'none';
                    this.dropZone1.style.display = 'none';
                    this.dropZone2.style.display = 'none';
                    
                    // æ¸…ç©ºä¼ æ„Ÿå™¨æ”¾ç½®åŒºåŸŸå†…å®¹
                    this.dropZone1.innerHTML = '';
                    this.dropZone2.innerHTML = '';
                    
                    // æ¸…é™¤é¢æ¿å†…å®¹
                    this.leftPanel.innerHTML = '';
                    this.rightPanel.innerHTML = '';
                    
                    // é‡ç½®æŒ‰é’®æ–‡æœ¬
                    this.markDangerBtn.innerHTML = '<i class="fas fa-exclamation-triangle"></i> æ ‡è®°å±é™©åŒºåŸŸ';
                    this.markDangerBtn.disabled = false;
                    
                    // é‡ç½®çŠ¶æ€
                    this.currentDanger = 1;
                    this.sensorsPlaced = 0;
                    this.interactionText.textContent = `ç‚¹å‡»æŒ‰é’®æ ‡è®°${this.getRoomChineseName()}ä¸­çš„å±é™©åŒºåŸŸ`;
                    this.interactionText.style.fontSize = '1rem';
                    this.interactionText.style.fontWeight = '500';
                    this.interactionText.style.color = '#34495e';
                }
                
                getRoomChineseName() {
                    const names = {
                        'livingRoom': 'å®¢å…',
                        'kitchen': 'å¨æˆ¿', 
                        'bathroom': 'å«ç”Ÿé—´',
                        'bedroom': 'å§å®¤'
                    };
                    return names[this.roomName] || 'æˆ¿é—´';
                }
                
                showDangerExplanation(panel, dangerNumber) {
                    const dangerExplanation = document.createElement('div');
                    dangerExplanation.className = 'danger-explanation';
                    
                    const dangers = {
                        'livingRoom': {
                            1: {
                                title: 'é˜²æ­¢çƒ«ä¼¤å±é™©',
                                description: 'æ¡Œå­ä¸Šçš„çƒ­æ°´å£¶å­˜åœ¨ä¸¥é‡çƒ«ä¼¤é£é™©ï¼š',
                                risks: [
                                    'è€äººè§†åŠ›ä¸å¥½ï¼Œå®¹æ˜“ç¢°å€’çƒ­æ°´å£¶',
                                    'è®°å¿†åŠ›å‡é€€å¯èƒ½å¿˜è®°å…³ç«',
                                    'ååº”è¿Ÿé’ï¼Œçƒ«ä¼¤åæ— æ³•åŠæ—¶å¤„ç†'
                                ]
                            },
                            2: {
                                title: 'é˜²æ­¢æ‘”å€’å±é™©', 
                                description: 'æ²™å‘åŒºåŸŸå­˜åœ¨æ‘”å€’é£é™©ï¼š',
                                risks: [
                                    'è€äººèµ·èº«æ—¶å®¹æ˜“å¤±å»å¹³è¡¡',
                                    'åœ°é¢æ¹¿æ»‘æˆ–ä¸å¹³æ•´',
                                    'ååº”è¿Ÿé’ï¼Œæ‘”å€’åæ— æ³•åŠæ—¶æ±‚åŠ©'
                                ]
                            }
                        },
                        'kitchen': {
                            1: {
                                title: 'é˜²æ­¢ç‡ƒæ°”æ³„æ¼',
                                description: 'ç‡ƒæ°”ç¶å­˜åœ¨æ³„æ¼é£é™©ï¼š',
                                risks: [
                                    'è€äººå¯èƒ½å¿˜è®°å…³é—­ç‡ƒæ°”é˜€é—¨',
                                    'å—…è§‰å‡é€€æ— æ³•åŠæ—¶å‘ç°æ³„æ¼',
                                    'è®°å¿†åŠ›å·®å¯èƒ½å¿˜è®°æ­£åœ¨ä½¿ç”¨ç‡ƒæ°”'
                                ]
                            },
                            2: {
                                title: 'é˜²æ­¢å¹²çƒ§å±é™©',
                                description: 'å¿˜è®°å…³ç«å¯¼è‡´å¹²çƒ§å­˜åœ¨ç«ç¾é£é™©ï¼š',
                                risks: [
                                    'è€äººè®°å¿†åŠ›å‡é€€å®¹æ˜“å¿˜è®°å…³ç«',
                                    'å¹²çƒ§å¯èƒ½å¯¼è‡´é”…å…·çƒ§æ¯å¼•å‘ç«ç¾',
                                    'ååº”è¿Ÿé’æ— æ³•åŠæ—¶å‘ç°å±é™©'
                                ]
                            }
                        },
                        'bathroom': {
                            1: {
                                title: 'é˜²æ­¢æ»‘å€’å±é™©',
                                description: 'å«ç”Ÿé—´åœ°é¢æ¹¿æ»‘å­˜åœ¨é£é™©ï¼š',
                                risks: [
                                    'åœ°é¢å®¹æ˜“ç§¯æ°´ï¼Œè€äººå®¹æ˜“æ»‘å€’',
                                    'èµ·èº«æ—¶å®¹æ˜“å¤±å»å¹³è¡¡',
                                    'ååº”è¿Ÿé’ï¼Œæ‘”å€’åæ— æ³•åŠæ—¶æ±‚åŠ©'
                                ]
                            },
                            2: {
                                title: 'é˜²æ­¢æ¼ç”µå±é™©',
                                description: 'å«ç”Ÿé—´ç”µå™¨ä½¿ç”¨å­˜åœ¨æ¼ç”µé£é™©ï¼š',
                                risks: [
                                    'è€äººå¯èƒ½ä½¿ç”¨æ¹¿æ‰‹æ¥è§¦ç”µå™¨',
                                    'ç”µå™¨è€åŒ–å¯èƒ½å¯¼è‡´æ¼ç”µ',
                                    'å¯¹ç”µå‡»å±é™©è®¤è¯†ä¸è¶³'
                                ]
                            }
                        },
                        'bedroom': {
                            1: {
                                title: 'é˜²æ­¢å¤œé—´æ‘”å€’',
                                description: 'å¤œé—´èµ·åºŠå­˜åœ¨æ‘”å€’é£é™©ï¼š',
                                risks: [
                                    'è€äººå¤œé—´èµ·åºŠæ—¶æ„è¯†ä¸æ¸…',
                                    'å…‰çº¿ä¸è¶³å®¹æ˜“ç»Šå€’',
                                    'ååº”è¿Ÿé’ï¼Œæ‘”å€’åæ— æ³•åŠæ—¶æ±‚åŠ©'
                                ]
                            },
                            2: {
                                title: 'é˜²æ­¢çªå‘ç–¾ç—…',
                                description: 'å¤œé—´ç¡çœ å­˜åœ¨å¥åº·é£é™©ï¼š',
                                risks: [
                                    'è€äººå¯èƒ½çªå‘ç–¾ç—…æ— æ³•æ±‚åŠ©',
                                    'ç¡çœ ä¸­å¯èƒ½å‡ºç°å‘¼å¸é—®é¢˜',
                                    'æ…¢æ€§ç—…å¯èƒ½åœ¨å¤œé—´å‘ä½œ'
                                ]
                            }
                        }
                    };
                    
                    const danger = dangers[this.roomName][dangerNumber];
                    
                    dangerExplanation.innerHTML = `
                        <h3><i class="fas fa-exclamation-triangle"></i> ${danger.title}</h3>
                        <p>${danger.description}</p>
                        <ul>
                            ${danger.risks.map(risk => `<li>${risk}</li>`).join('')}
                        </ul>
                        <div class="question-box">
                            <p>ğŸ’¡ æ€è€ƒï¼šæˆ‘ä»¬å¯ä»¥é€‰æ‹©ä»€ä¹ˆä¼ æ„Ÿå™¨æ¥é¢„é˜²è¿™ç§å±é™©å‘¢ï¼Ÿ</p>
                        </div>
                    `;
                    
                    panel.appendChild(dangerExplanation);
                }
                
                showSensorSelection(panel, dangerNumber) {
                    const sensorTitle = document.createElement('h4');
                    sensorTitle.textContent = 'è¯·é€‰æ‹©åˆé€‚çš„ä¼ æ„Ÿå™¨æ‹–åŠ¨åˆ°å±é™©åŒºåŸŸï¼š';
                    sensorTitle.style.marginBottom = '15px';
                    sensorTitle.style.color = '#2c3e50';
                    panel.appendChild(sensorTitle);
                    
                    const sensorOptions = document.createElement('div');
                    sensorOptions.className = 'sensor-options';
                    panel.appendChild(sensorOptions);
                    
                    // ç”Ÿæˆä¼ æ„Ÿå™¨é€‰é¡¹
                    const sensors = dangerNumber === 1 ? this.danger1Sensors : this.danger2Sensors;
                    this.generateSensorOptions(sensorOptions, sensors);
                }
                
                generateSensorOptions(container, sensors) {
                    // éšæœºæ’åºä¼ æ„Ÿå™¨
                    const shuffledSensors = [...sensors].sort(() => Math.random() - 0.5);
                    
                    shuffledSensors.forEach(sensor => {
                        const sensorElement = document.createElement('div');
                        sensorElement.className = 'sensor-option';
                        sensorElement.draggable = true;
                        sensorElement.innerHTML = `
                            <i class="${sensor.icon}"></i>
                            <div class="sensor-name">${sensor.name}</div>
                        `;
                        
                        // æ·»åŠ æ‹–æ‹½äº‹ä»¶
                        sensorElement.addEventListener('dragstart', function(e) {
                            e.dataTransfer.setData('text/plain', sensor.name);
                            e.dataTransfer.setData('correct', sensor.correct.toString());
                        });
                        
                        container.appendChild(sensorElement);
                    });
                }
                
                handleDrop(e, zone) {
                    e.preventDefault();
                    zone.style.border = '4px dashed #2ecc71';
                    zone.style.background = 'rgba(46, 204, 113, 0.15)';
                    
                    const sensorName = e.dataTransfer.getData('text/plain');
                    const isCorrect = e.dataTransfer.getData('correct') === 'true';
                    
                    if (isCorrect) {
                        // æ­£ç¡®é€‰æ‹©
                        zone.innerHTML = `
                            <i class="fas fa-check-circle" style="font-size: 2rem; color: #2ecc71;"></i>
                            <div style="margin-top: 10px; font-weight: bold;">${sensorName}</div>
                        `;
                        
                        // æ˜¾ç¤ºæˆåŠŸæ¶ˆæ¯
                        this.showSuccessMessage();
                        
                        this.sensorsPlaced++;
                        
                        // æ£€æŸ¥æ˜¯å¦æ‰€æœ‰ä¼ æ„Ÿå™¨éƒ½å·²æ”¾ç½®
                        if (this.sensorsPlaced === 2) {
                            this.interactionText.textContent = 'æ­å–œï¼æ‰€æœ‰ä¼ æ„Ÿå™¨å·²æ­£ç¡®å®‰è£…ï¼';
                        }
                    } else {
                        // é”™è¯¯é€‰æ‹©
                        zone.innerHTML = `
                            <i class="fas fa-times-circle" style="font-size: 2rem; color: #e74c3c;"></i>
                            <div style="margin-top: 10px; font-weight: bold;">${sensorName}</div>
                        `;
                        
                        // çŸ­æš‚æ˜¾ç¤ºé”™è¯¯çŠ¶æ€
                        zone.style.border = '3px solid #e74c3c';
                        zone.style.background = 'rgba(231, 76, 60, 0.2)';
                        
                        setTimeout(() => {
                            zone.innerHTML = '';
                            zone.style.border = '4px dashed #2ecc71';
                            zone.style.background = 'rgba(46, 204, 113, 0.15)';
                        }, 1500);
                    }
                }
                
                showSuccessMessage() {
                    const successMessage = document.getElementById('successMessage');
                    successMessage.style.display = 'block';
                    setTimeout(() => {
                        successMessage.style.display = 'none';
                    }, 2000);
                }
            }

            // åˆå§‹åŒ–æˆ¿é—´ç®¡ç†å™¨
            const livingRoomManager = new RoomManager('livingRoom');
            const kitchenManager = new RoomManager('kitchen');
            const bathroomManager = new RoomManager('bathroom');
            const bedroomManager = new RoomManager('bedroom');

            // é¡µé¢å¯¼èˆªé€»è¾‘
            const houseExterior = document.getElementById('houseExterior');
            const houseInterior = document.getElementById('houseInterior');
            const frontDoor = document.getElementById('frontDoor');
            const backToExterior = document.getElementById('backToExterior');
            
            const livingRoom = document.getElementById('livingRoom');
            const kitchen = document.getElementById('kitchen');
            const bathroom = document.getElementById('bathroom');
            const bedroom = document.getElementById('bedroom');
            
            const livingRoomDetail = document.getElementById('livingRoomDetail');
            const kitchenDetail = document.getElementById('kitchenDetail');
            const bathroomDetail = document.getElementById('bathroomDetail');
            const bedroomDetail = document.getElementById('bedroomDetail');
            
            const backToInterior1 = document.getElementById('backToInterior1');
            const backToInterior2 = document.getElementById('backToInterior2');
            const backToInterior3 = document.getElementById('backToInterior3');
            const backToInterior4 = document.getElementById('backToInterior4');

            // äº‹ä»¶ç›‘å¬å™¨
            frontDoor.addEventListener('click', function() {
                houseExterior.style.display = 'none';
                houseInterior.style.display = 'block';
            });
            
            backToExterior.addEventListener('click', function() {
                houseInterior.style.display = 'none';
                houseExterior.style.display = 'flex';
            });
            
            livingRoom.addEventListener('click', function() {
                houseInterior.style.display = 'none';
                livingRoomDetail.style.display = 'block';
                livingRoomManager.reset();
            });
            
            kitchen.addEventListener('click', function() {
                houseInterior.style.display = 'none';
                kitchenDetail.style.display = 'block';
                kitchenManager.reset();
            });
            
            bathroom.addEventListener('click', function() {
                houseInterior.style.display = 'none';
                bathroomDetail.style.display = 'block';
                bathroomManager.reset();
            });
            
            bedroom.addEventListener('click', function() {
                houseInterior.style.display = 'none';
                bedroomDetail.style.display = 'block';
                bedroomManager.reset();
            });
            
            backToInterior1.addEventListener('click', function() {
                livingRoomDetail.style.display = 'none';
                houseInterior.style.display = 'block';
            });
            
            backToInterior2.addEventListener('click', function() {
                kitchenDetail.style.display = 'none';
                houseInterior.style.display = 'block';
            });
            
            backToInterior3.addEventListener('click', function() {
                bathroomDetail.style.display = 'none';
                houseInterior.style.display = 'block';
            });
            
            backToInterior4.addEventListener('click', function() {
                bedroomDetail.style.display = 'none';
                houseInterior.style.display = 'block';
            });
        }

        // åˆå§‹åŒ–æ˜Ÿçº§è¯„åˆ†åŠŸèƒ½
        function initStarRatings() {
            document.querySelectorAll('.rating-stars').forEach(starsContainer => {
                const stars = starsContainer.querySelectorAll('.star');
                stars.forEach(star => {
                    star.addEventListener('click', function() {
                        const value = parseInt(this.getAttribute('data-value'));
                        const containerId = starsContainer.id;
                        
                        // é‡ç½®æ‰€æœ‰æ˜Ÿæ˜Ÿ
                        stars.forEach(s => s.classList.remove('active'));
                        
                        // æ¿€æ´»é€‰ä¸­çš„æ˜Ÿæ˜Ÿ
                        for (let i = 0; i < value; i++) {
                            stars[i].classList.add('active');
                        }
                        
                        // ä¿å­˜è¯„åˆ†
                        saveRating(containerId, value);
                    });
                });
            });
        }

        // ä¿å­˜è¯„åˆ†
        function saveRating(containerId, value) {
            const gameState = getCurrentGameState();
            if (!gameState.ratings) {
                gameState.ratings = {};
            }
            gameState.ratings[containerId] = value;
            saveGameState();
        }

        // è·å–å½“å‰æ¸¸æˆçŠ¶æ€
        function getCurrentGameState() {
            const groupName = document.getElementById('group-select').value;
            if (!groupName) return null;
            
            const savedState = localStorage.getItem(`shenglianGameState_${groupName}`);
            return savedState ? JSON.parse(savedState) : { currentLevel: 1, badges: [...badges] };
        }

        // æ›´æ–°ä»»åŠ¡çŠ¶æ€æ˜¾ç¤º
        function updateTaskStatus() {
            const task1Completed = document.getElementById('check3-1').checked;
            const task2Completed = document.getElementById('check3-2').checked;
            
            document.getElementById('task1-status').textContent = task1Completed ? 'å·²å®Œæˆ' : 'è¿›è¡Œä¸­';
            document.getElementById('task1-status').className = task1Completed ? 
                'task-status-badge status-completed' : 'task-status-badge status-inprogress';
            
            document.getElementById('task2-status').textContent = task2Completed ? 'å·²å®Œæˆ' : 'è¿›è¡Œä¸­';
            document.getElementById('task2-status').className = task2Completed ? 
                'task-status-badge status-completed' : 'task-status-badge status-inprogress';
            
            saveGameState();
            updateNavigation();
        }

        // æ›´æ–°è¿›åº¦æ¡
        function updateProgress() {
            const progress = ((currentLevel - 1) / (totalLevels - 1)) * 100;
            document.getElementById('progress-fill').style.width = `${progress}%`;
            
            // æ›´æ–°å…³å¡æ¿€æ´»çŠ¶æ€
            document.querySelectorAll('.level').forEach((level, index) => {
                if (index + 1 <= currentLevel) {
                    level.classList.add('active');
                } else {
                    level.classList.remove('active');
                }
            });
        }

        // æ›´æ–°å¯¼èˆªæŒ‰é’®çŠ¶æ€
        function updateNavigation() {
            document.getElementById('prev-btn').disabled = currentLevel === 1;
            
            if (currentLevel === totalLevels) {
                document.getElementById('next-btn').style.display = 'none';
            } else {
                document.getElementById('next-btn').style.display = 'block';
                document.getElementById('next-btn').disabled = !isLevelComplete(currentLevel);
            }
        }

        // æ£€æŸ¥å…³å¡æ˜¯å¦å®Œæˆ
        function isLevelComplete(level) {
            // ç¬¬ä¸€å…³ï¼šåªéœ€è¦é€‰æ‹©é¢˜å·²å›ç­”
            if (level === 1) {
                return document.querySelector('input[name="question1"]:checked') !== null;
            }
            
            // ç¬¬äºŒå…³ï¼šæ£€æŸ¥è®¾è®¡è“å›¾æ˜¯å¦é€šè¿‡å®¡æ ¸
            if (level === 2) {
                return document.getElementById('check2-1').checked;
            }
            
            // ç¬¬ä¸‰å…³ï¼šæ£€æŸ¥ä»»åŠ¡ä¸€ã€ä»»åŠ¡äºŒæ˜¯å¦å®Œæˆï¼ˆæŒ‘æˆ˜ä»»åŠ¡æ˜¯é€‰åšçš„ï¼Œä¸å½±å“è¿‡å…³ï¼‰
            if (level === 3) {
                const task1Completed = document.getElementById('check3-1').checked;
                const task2Completed = document.getElementById('check3-2').checked;
                
                return task1Completed && task2Completed;
            }
            
            // ç¬¬å››å…³ï¼šæ£€æŸ¥æ¼”ç¤ºæ˜¯å¦å®Œæˆ
            if (level === 4) {
                return document.getElementById('check4-1').checked;
            }
            
            // ç¬¬äº”å…³ï¼šæ£€æŸ¥æ€»ç»“æ˜¯å¦å®Œæˆ
            if (level === 5) {
                return document.getElementById('check5-1').checked;
            }
            
            // ç¬¬å…­å…³ï¼šæ£€æŸ¥è¯„ä»·æ˜¯å¦å®Œæˆ
            if (level === 6) {
                return document.getElementById('check6-1').checked;
            }
            
            return false;
        }

        // æ›´æ–°å…³å¡å®ŒæˆçŠ¶æ€æ˜¾ç¤º
        function updateLevelCompletion() {
            for (let i = 1; i <= totalLevels; i++) {
                const completionElement = document.getElementById(`level-${i}-completion`);
                if (completionElement) {
                    if (isLevelComplete(i) && currentLevel === i) {
                        completionElement.classList.add('show');
                    } else {
                        completionElement.classList.remove('show');
                    }
                }
            }
        }

        // åˆ‡æ¢åˆ°ä¸‹ä¸€å…³
        function nextLevel() {
            if (currentLevel < totalLevels && isLevelComplete(currentLevel)) {
                // è§£é”å½“å‰å…³å¡çš„å‹‹ç« 
                if (currentLevel <= 7) {
                    badges[currentLevel - 1].earned = true;
                    document.getElementById(`badge-${currentLevel}`).classList.add('unlocked');
                }
                
                // åˆ‡æ¢åˆ°ä¸‹ä¸€å…³
                document.getElementById(`level-${currentLevel}`).classList.remove('active');
                currentLevel++;
                document.getElementById(`level-${currentLevel}`).classList.add('active');
                
                updateProgress();
                updateNavigation();
                updateLevelCompletion();
                
                // å¦‚æœæ˜¯æœ€åä¸€å…³ï¼Œæ›´æ–°ç»Ÿè®¡æ•°æ®
                if (currentLevel === totalLevels) {
                    updateCompletionStats();
                }
                
                saveGameState();
            }
        }

        // åˆ‡æ¢åˆ°ä¸Šä¸€å…³
        function prevLevel() {
            if (currentLevel > 1) {
                document.getElementById(`level-${currentLevel}`).classList.remove('active');
                currentLevel--;
                document.getElementById(`level-${currentLevel}`).classList.add('active');
                
                updateProgress();
                updateNavigation();
                updateLevelCompletion();
                saveGameState();
            }
        }

        // æ›´æ–°å®Œæˆé¡µé¢çš„ç»Ÿè®¡æ•°æ®
        function updateCompletionStats() {
            const earnedBadges = badges.filter(badge => badge.earned).length;
            const completedTasks = document.querySelectorAll('input[type="checkbox"]:checked').length;
            const challengesBeaten = document.querySelectorAll('input[type="checkbox"]:checked').length; // ç®€åŒ–è®¡ç®—
            
            document.getElementById('badges-earned').textContent = earnedBadges;
            document.getElementById('tasks-completed').textContent = completedTasks;
            document.getElementById('challenges-beaten').textContent = challengesBeaten;
            
            // æ›´æ–°å®Œæˆé¡µé¢ä¸Šçš„å°ç»„åç§°
            const groupName = document.getElementById('group-select').value || '';
            document.getElementById('final-team-name').textContent = `${groupName}`;
        }

        // ä¿å­˜æ¸¸æˆçŠ¶æ€åˆ°æœ¬åœ°å­˜å‚¨
        function saveGameState() {
            const groupName = document.getElementById('group-select').value;
            
            if (!groupName) {
                showDbStatus('è¯·å…ˆé€‰æ‹©å°ç»„', 'error');
                return;
            }
            
            const gameState = {
                currentLevel,
                badges,
                // ä¿å­˜æ‰€æœ‰è¡¨å•çŠ¶æ€
                formData: {},
                ratings: {}
            };
            
            // ä¿å­˜æ‰€æœ‰è¡¨å•å…ƒç´ çŠ¶æ€
            document.querySelectorAll('input, select, textarea').forEach(element => {
                if (element.type === 'checkbox') {
                    gameState.formData[element.id] = element.checked;
                } else if (element.type === 'radio') {
                    if (element.checked) {
                        gameState.formData[element.name] = element.value;
                    }
                } else {
                    gameState.formData[element.id] = element.value;
                }
            });
            
            // ä¿å­˜è¯„åˆ†æ•°æ®
            document.querySelectorAll('.rating-stars').forEach(starsContainer => {
                const activeStars = starsContainer.querySelectorAll('.star.active').length;
                gameState.ratings[starsContainer.id] = activeStars;
            });
            
            // æ¨¡æ‹Ÿä¿å­˜åˆ°æ•°æ®åº“
            localStorage.setItem(`shenglianGameState_${groupName}`, JSON.stringify(gameState));
            showDbStatus(`æ•°æ®å·²ä¿å­˜ (${groupName})`, 'success');
        }

        // ä»æœ¬åœ°å­˜å‚¨åŠ è½½æ¸¸æˆçŠ¶æ€
        function loadGameState() {
            const groupName = document.getElementById('group-select').value;
            
            if (!groupName) {
                resetGameState();
                return;
            }
            
            const savedState = localStorage.getItem(`shenglianGameState_${groupName}`);
            if (savedState) {
                const gameState = JSON.parse(savedState);
                currentLevel = gameState.currentLevel || 1;
                
                // æ¢å¤è¡¨å•çŠ¶æ€
                if (gameState.formData) {
                    Object.keys(gameState.formData).forEach(elementId => {
                        const element = document.getElementById(elementId);
                        if (element) {
                            if (element.type === 'checkbox') {
                                element.checked = gameState.formData[elementId];
                            } else {
                                element.value = gameState.formData[elementId];
                            }
                        }
                        
                        // å¤„ç†å•é€‰æŒ‰é’®
                        if (elementId === 'question1') {
                            const radio = document.querySelector(`input[name="question1"][value="${gameState.formData[elementId]}"]`);
                            if (radio) {
                                radio.checked = true;
                                radio.closest('.option').classList.add('selected');
                            }
                        }
                    });
                }
                
                // æ¢å¤è¯„åˆ†çŠ¶æ€
                if (gameState.ratings) {
                    Object.keys(gameState.ratings).forEach(ratingId => {
                        const starsContainer = document.getElementById(ratingId);
                        if (starsContainer) {
                            const stars = starsContainer.querySelectorAll('.star');
                            const ratingValue = gameState.ratings[ratingId];
                            
                            // é‡ç½®æ‰€æœ‰æ˜Ÿæ˜Ÿ
                            stars.forEach(star => star.classList.remove('active'));
                            
                            // æ¿€æ´»é€‰ä¸­çš„æ˜Ÿæ˜Ÿ
                            for (let i = 0; i < ratingValue; i++) {
                                stars[i].classList.add('active');
                            }
                        }
                    });
                }
                
                // æ¢å¤æŒ‘æˆ˜ä»»åŠ¡é€‰æ‹©
                if (gameState.formData && gameState.formData['challenge-select']) {
                    document.getElementById('challenge-select').value = gameState.formData['challenge-select'];
                    // è§¦å‘changeäº‹ä»¶æ¥æ˜¾ç¤ºå¯¹åº”çš„æè¿°
                    const event = new Event('change');
                    document.getElementById('challenge-select').dispatchEvent(event);
                }

                // æ¢å¤æŒ‘æˆ˜ä»»åŠ¡å®ŒæˆçŠ¶æ€
                if (gameState.formData && gameState.formData['check3-3']) {
                    document.getElementById('check3-3').checked = gameState.formData['check3-3'];
                }
                
                // æ¢å¤å…³å¡æ˜¾ç¤º
                document.querySelectorAll('.level-content').forEach(content => {
                    content.classList.remove('active');
                });
                document.getElementById(`level-${currentLevel}`).classList.add('active');
                
                // æ¢å¤å‹‹ç« çŠ¶æ€
                if (gameState.badges) {
                    gameState.badges.forEach((badge, index) => {
                        if (badge.earned && index < 7) {
                            badges[index].earned = true;
                            document.getElementById(`badge-${index + 1}`).classList.add('unlocked');
                        }
                    });
                }
                
                // æ¢å¤ä»»åŠ¡äºŒçŠ¶æ€
                if (gameState.formData && gameState.formData['check3-1']) {
                    unlockTask2();
                }
                
                updateProgress();
                updateNavigation();
                updateTaskStatus();
                updateLevelCompletion();
                
                // å¦‚æœæ˜¯æœ€åä¸€å…³ï¼Œæ›´æ–°ç»Ÿè®¡æ•°æ®
                if (currentLevel === totalLevels) {
                    updateCompletionStats();
                }
                
                showDbStatus(`å·²åŠ è½½ ${groupName} çš„æ•°æ®`, 'success');
            } else {
                resetGameState();
                showDbStatus(`${groupName} æ²¡æœ‰ä¿å­˜çš„æ•°æ®ï¼Œå·²åˆå§‹åŒ–æ–°æ•°æ®`, 'success');
            }
        }

        // é‡ç½®æ¸¸æˆçŠ¶æ€
        function resetGameState() {
            currentLevel = 1;
            badges.forEach(badge => badge.earned = false);
            
            // é‡ç½®æ‰€æœ‰è¡¨å•
            document.querySelectorAll('input, select, textarea').forEach(element => {
                if (element.type === 'checkbox') {
                    element.checked = false;
                } else if (element.type === 'radio') {
                    element.checked = false;
                    element.closest('.option').classList.remove('selected');
                } else {
                    element.value = '';
                }
            });
            
            // é‡ç½®è¯„åˆ†
            document.querySelectorAll('.star').forEach(star => {
                star.classList.remove('active');
            });
            
            // é‡ç½®å…³å¡æ˜¾ç¤º
            document.querySelectorAll('.level-content').forEach(content => {
                content.classList.remove('active');
            });
            document.getElementById('level-1').classList.add('active');
            
            // é‡ç½®å‹‹ç« 
            document.querySelectorAll('.badge').forEach(badge => {
                badge.classList.remove('unlocked');
            });
            
            // é‡ç½®ä»»åŠ¡äºŒçŠ¶æ€
            document.getElementById('task2-card').classList.add('task-locked');
            document.getElementById('check3-2').disabled = true;
            document.getElementById('task1-complete-message').style.display = 'none';
            
            // é‡ç½®ä»»åŠ¡å¯¼èˆª
            document.getElementById('task1-nav').classList.add('active');
            document.getElementById('task2-nav').classList.remove('active');
            document.getElementById('task1-content').classList.add('active');
            document.getElementById('task2-content').classList.remove('active');
            
            // éšè—æ‰€æœ‰è¿‡å…³ç¡®è®¤
            document.querySelectorAll('.level-completion').forEach(element => {
                element.classList.remove('show');
            });
            
            updateProgress();
            updateNavigation();
            updateTaskStatus();
        }

        // æ˜¾ç¤ºæ•°æ®åº“çŠ¶æ€
        function showDbStatus(message, type) {
            const dbStatus = document.getElementById('db-status');
            dbStatus.textContent = message;
            dbStatus.className = `db-status ${type}`;
            dbStatus.style.display = 'block';
            
            // 3ç§’åéšè—çŠ¶æ€æ¶ˆæ¯
            setTimeout(() => {
                dbStatus.style.display = 'none';
            }, 3000);
        }

        // é‡æ–°å¼€å§‹æ¸¸æˆ
        function restartGame() {
            if (confirm('ç¡®å®šè¦é‡æ–°å¼€å§‹æŒ‘æˆ˜å—ï¼Ÿæ‰€æœ‰è¿›åº¦å°†è¢«é‡ç½®ã€‚')) {
                const groupName = document.getElementById('group-select').value;
                if (groupName) {
                    localStorage.removeItem(`shenglianGameState_${groupName}`);
                }
                resetGameState();
                showDbStatus('æ¸¸æˆå·²é‡ç½®', 'success');
            }
        }

        // ç›‘å¬å¤é€‰æ¡†å˜åŒ–ï¼Œè‡ªåŠ¨ä¿å­˜çŠ¶æ€
        document.addEventListener('change', function(event) {
            if (event.target.type === 'checkbox') {
                saveGameState();
                updateNavigation();
                updateLevelCompletion();
            }
        });

        // é¡µé¢åŠ è½½å®Œæˆååˆå§‹åŒ–æ¸¸æˆ
        document.addEventListener('DOMContentLoaded', initGame);
    </script>
</body>
</html>